<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Tim Laboratorium Biro TI" />


<title>Transformation Data</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Workshop Data Analytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="intro.html">Intro</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="11-dplyr-select.html">Select</a>
    </li>
    <li>
      <a href="12-dplyr-transform.html">Transform</a>
    </li>
    <li>
      <a href="13-dplyr-filter.html">Filter</a>
    </li>
    <li>
      <a href="14-dplyr-sum.html">Summarize</a>
    </li>
  </ul>
</li>
<li>
  <a href="01-processing.html">Processing</a>
</li>
<li>
  <a href="02-vaksin.html">GGPlot</a>
</li>
<li>
  <a href="03-covid.html">Plotly</a>
</li>
<li>
  <a href="04-maps.html">Maps</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Transformation Data</h1>
<h3 class="subtitle">Manipulate Your Columns<br></h3>
<h4 class="author">Tim Laboratorium Biro TI</h4>
<h4 class="date">22 Desember, 2021<br></h4>

</div>


<p>This is a second post in a series of dplyr functions.</p>
<ul>
<li><a href="https://suzanbaert.netlify.com/2018/01/dplyr-tutorial-1/">Part 1: Basic to Advanced Ways to Select Columns</a></li>
</ul>
<p>This second one covers tools to manipulate your columns to get them the way you want them.</p>
<ul>
<li>content</li>
</ul>
<p><strong>The data</strong><br />
As per previous blog posts, many of these functions truly shine when you have a lot of columns, but to make it easy on people to copy paste code and experiment, I’m using a built-in dataset:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(msleep)</span></code></pre></div>
<pre><code>## Rows: 83
## Columns: 11
## $ name         &lt;chr&gt; &quot;Cheetah&quot;, &quot;Owl monkey&quot;, &quot;Mountain beaver&quot;, &quot;Greater shor~
## $ genus        &lt;chr&gt; &quot;Acinonyx&quot;, &quot;Aotus&quot;, &quot;Aplodontia&quot;, &quot;Blarina&quot;, &quot;Bos&quot;, &quot;Bra~
## $ vore         &lt;chr&gt; &quot;carni&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;herbi&quot;, &quot;carn~
## $ order        &lt;chr&gt; &quot;Carnivora&quot;, &quot;Primates&quot;, &quot;Rodentia&quot;, &quot;Soricomorpha&quot;, &quot;Art~
## $ conservation &lt;chr&gt; &quot;lc&quot;, NA, &quot;nt&quot;, &quot;lc&quot;, &quot;domesticated&quot;, NA, &quot;vu&quot;, NA, &quot;dome~
## $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1, 3.0, 5~
## $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0.6, 0.8, ~
## $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.3833333, N~
## $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9, 21.0, 1~
## $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0.07000, 0~
## $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.490, 0.04~</code></pre>
<p><br></p>
<div id="mutating-columns-the-basics" class="section level2" number="0.1">
<h2 number="0.1"><span class="header-section-number">0.1</span> <strong>Mutating columns: the basics</strong></h2>
<p>You can make new columns with the <code>mutate()</code> function. The options inside mutate are almost endless: pretty much anything that you can do to normal vectors, can be done inside a <code>mutate()</code> function.<br />
Anything inside <code>mutate</code> can either be a new column (by giving mutate a new column name), or can replace the current column (by keeping the same column name).</p>
<p>One of the simplest options is a calculation based on values in other columns. In the sample code, we’re changing the sleep data from data measured in hours to minutes.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sleep_total_min =</span> sleep_total <span class="sc">*</span> <span class="dv">60</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_total_min"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"12.1","3":"726"},{"1":"Owl monkey","2":"17.0","3":"1020"},{"1":"Mountain beaver","2":"14.4","3":"864"},{"1":"Greater short-tailed shrew","2":"14.9","3":"894"},{"1":"Cow","2":"4.0","3":"240"},{"1":"Three-toed sloth","2":"14.4","3":"864"},{"1":"Northern fur seal","2":"8.7","3":"522"},{"1":"Vesper mouse","2":"7.0","3":"420"},{"1":"Dog","2":"10.1","3":"606"},{"1":"Roe deer","2":"3.0","3":"180"},{"1":"Goat","2":"5.3","3":"318"},{"1":"Guinea pig","2":"9.4","3":"564"},{"1":"Grivet","2":"10.0","3":"600"},{"1":"Chinchilla","2":"12.5","3":"750"},{"1":"Star-nosed mole","2":"10.3","3":"618"},{"1":"African giant pouched rat","2":"8.3","3":"498"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"546"},{"1":"Long-nosed armadillo","2":"17.4","3":"1044"},{"1":"Tree hyrax","2":"5.3","3":"318"},{"1":"North American Opossum","2":"18.0","3":"1080"},{"1":"Asian elephant","2":"3.9","3":"234"},{"1":"Big brown bat","2":"19.7","3":"1182"},{"1":"Horse","2":"2.9","3":"174"},{"1":"Donkey","2":"3.1","3":"186"},{"1":"European hedgehog","2":"10.1","3":"606"},{"1":"Patas monkey","2":"10.9","3":"654"},{"1":"Western american chipmunk","2":"14.9","3":"894"},{"1":"Domestic cat","2":"12.5","3":"750"},{"1":"Galago","2":"9.8","3":"588"},{"1":"Giraffe","2":"1.9","3":"114"},{"1":"Pilot whale","2":"2.7","3":"162"},{"1":"Gray seal","2":"6.2","3":"372"},{"1":"Gray hyrax","2":"6.3","3":"378"},{"1":"Human","2":"8.0","3":"480"},{"1":"Mongoose lemur","2":"9.5","3":"570"},{"1":"African elephant","2":"3.3","3":"198"},{"1":"Thick-tailed opposum","2":"19.4","3":"1164"},{"1":"Macaque","2":"10.1","3":"606"},{"1":"Mongolian gerbil","2":"14.2","3":"852"},{"1":"Golden hamster","2":"14.3","3":"858"},{"1":"Vole","2":"12.8","3":"768"},{"1":"House mouse","2":"12.5","3":"750"},{"1":"Little brown bat","2":"19.9","3":"1194"},{"1":"Round-tailed muskrat","2":"14.6","3":"876"},{"1":"Slow loris","2":"11.0","3":"660"},{"1":"Degu","2":"7.7","3":"462"},{"1":"Northern grasshopper mouse","2":"14.5","3":"870"},{"1":"Rabbit","2":"8.4","3":"504"},{"1":"Sheep","2":"3.8","3":"228"},{"1":"Chimpanzee","2":"9.7","3":"582"},{"1":"Tiger","2":"15.8","3":"948"},{"1":"Jaguar","2":"10.4","3":"624"},{"1":"Lion","2":"13.5","3":"810"},{"1":"Baboon","2":"9.4","3":"564"},{"1":"Desert hedgehog","2":"10.3","3":"618"},{"1":"Potto","2":"11.0","3":"660"},{"1":"Deer mouse","2":"11.5","3":"690"},{"1":"Phalanger","2":"13.7","3":"822"},{"1":"Caspian seal","2":"3.5","3":"210"},{"1":"Common porpoise","2":"5.6","3":"336"},{"1":"Potoroo","2":"11.1","3":"666"},{"1":"Giant armadillo","2":"18.1","3":"1086"},{"1":"Rock hyrax","2":"5.4","3":"324"},{"1":"Laboratory rat","2":"13.0","3":"780"},{"1":"African striped mouse","2":"8.7","3":"522"},{"1":"Squirrel monkey","2":"9.6","3":"576"},{"1":"Eastern american mole","2":"8.4","3":"504"},{"1":"Cotton rat","2":"11.3","3":"678"},{"1":"Mole rat","2":"10.6","3":"636"},{"1":"Arctic ground squirrel","2":"16.6","3":"996"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"828"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"954"},{"1":"Musk shrew","2":"12.8","3":"768"},{"1":"Pig","2":"9.1","3":"546"},{"1":"Short-nosed echidna","2":"8.6","3":"516"},{"1":"Eastern american chipmunk","2":"15.8","3":"948"},{"1":"Brazilian tapir","2":"4.4","3":"264"},{"1":"Tenrec","2":"15.6","3":"936"},{"1":"Tree shrew","2":"8.9","3":"534"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"312"},{"1":"Genet","2":"6.3","3":"378"},{"1":"Arctic fox","2":"12.5","3":"750"},{"1":"Red fox","2":"9.8","3":"588"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>New columns can be made with aggregate functions such as average, median, max, min, sd, …<br />
The sample code makes two new columns: one showing the difference of each row versus the average sleep time, and one showing the difference versus the animal with the least sleep.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sleep_total_vs_AVG =</span> sleep_total <span class="sc">-</span> <span class="fu">round</span>(<span class="fu">mean</span>(sleep_total), <span class="dv">1</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">sleep_total_vs_MIN =</span> sleep_total <span class="sc">-</span> <span class="fu">min</span>(sleep_total))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_total_vs_AVG"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_total_vs_MIN"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"12.1","3":"1.7","4":"10.2"},{"1":"Owl monkey","2":"17.0","3":"6.6","4":"15.1"},{"1":"Mountain beaver","2":"14.4","3":"4.0","4":"12.5"},{"1":"Greater short-tailed shrew","2":"14.9","3":"4.5","4":"13.0"},{"1":"Cow","2":"4.0","3":"-6.4","4":"2.1"},{"1":"Three-toed sloth","2":"14.4","3":"4.0","4":"12.5"},{"1":"Northern fur seal","2":"8.7","3":"-1.7","4":"6.8"},{"1":"Vesper mouse","2":"7.0","3":"-3.4","4":"5.1"},{"1":"Dog","2":"10.1","3":"-0.3","4":"8.2"},{"1":"Roe deer","2":"3.0","3":"-7.4","4":"1.1"},{"1":"Goat","2":"5.3","3":"-5.1","4":"3.4"},{"1":"Guinea pig","2":"9.4","3":"-1.0","4":"7.5"},{"1":"Grivet","2":"10.0","3":"-0.4","4":"8.1"},{"1":"Chinchilla","2":"12.5","3":"2.1","4":"10.6"},{"1":"Star-nosed mole","2":"10.3","3":"-0.1","4":"8.4"},{"1":"African giant pouched rat","2":"8.3","3":"-2.1","4":"6.4"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"-1.3","4":"7.2"},{"1":"Long-nosed armadillo","2":"17.4","3":"7.0","4":"15.5"},{"1":"Tree hyrax","2":"5.3","3":"-5.1","4":"3.4"},{"1":"North American Opossum","2":"18.0","3":"7.6","4":"16.1"},{"1":"Asian elephant","2":"3.9","3":"-6.5","4":"2.0"},{"1":"Big brown bat","2":"19.7","3":"9.3","4":"17.8"},{"1":"Horse","2":"2.9","3":"-7.5","4":"1.0"},{"1":"Donkey","2":"3.1","3":"-7.3","4":"1.2"},{"1":"European hedgehog","2":"10.1","3":"-0.3","4":"8.2"},{"1":"Patas monkey","2":"10.9","3":"0.5","4":"9.0"},{"1":"Western american chipmunk","2":"14.9","3":"4.5","4":"13.0"},{"1":"Domestic cat","2":"12.5","3":"2.1","4":"10.6"},{"1":"Galago","2":"9.8","3":"-0.6","4":"7.9"},{"1":"Giraffe","2":"1.9","3":"-8.5","4":"0.0"},{"1":"Pilot whale","2":"2.7","3":"-7.7","4":"0.8"},{"1":"Gray seal","2":"6.2","3":"-4.2","4":"4.3"},{"1":"Gray hyrax","2":"6.3","3":"-4.1","4":"4.4"},{"1":"Human","2":"8.0","3":"-2.4","4":"6.1"},{"1":"Mongoose lemur","2":"9.5","3":"-0.9","4":"7.6"},{"1":"African elephant","2":"3.3","3":"-7.1","4":"1.4"},{"1":"Thick-tailed opposum","2":"19.4","3":"9.0","4":"17.5"},{"1":"Macaque","2":"10.1","3":"-0.3","4":"8.2"},{"1":"Mongolian gerbil","2":"14.2","3":"3.8","4":"12.3"},{"1":"Golden hamster","2":"14.3","3":"3.9","4":"12.4"},{"1":"Vole","2":"12.8","3":"2.4","4":"10.9"},{"1":"House mouse","2":"12.5","3":"2.1","4":"10.6"},{"1":"Little brown bat","2":"19.9","3":"9.5","4":"18.0"},{"1":"Round-tailed muskrat","2":"14.6","3":"4.2","4":"12.7"},{"1":"Slow loris","2":"11.0","3":"0.6","4":"9.1"},{"1":"Degu","2":"7.7","3":"-2.7","4":"5.8"},{"1":"Northern grasshopper mouse","2":"14.5","3":"4.1","4":"12.6"},{"1":"Rabbit","2":"8.4","3":"-2.0","4":"6.5"},{"1":"Sheep","2":"3.8","3":"-6.6","4":"1.9"},{"1":"Chimpanzee","2":"9.7","3":"-0.7","4":"7.8"},{"1":"Tiger","2":"15.8","3":"5.4","4":"13.9"},{"1":"Jaguar","2":"10.4","3":"0.0","4":"8.5"},{"1":"Lion","2":"13.5","3":"3.1","4":"11.6"},{"1":"Baboon","2":"9.4","3":"-1.0","4":"7.5"},{"1":"Desert hedgehog","2":"10.3","3":"-0.1","4":"8.4"},{"1":"Potto","2":"11.0","3":"0.6","4":"9.1"},{"1":"Deer mouse","2":"11.5","3":"1.1","4":"9.6"},{"1":"Phalanger","2":"13.7","3":"3.3","4":"11.8"},{"1":"Caspian seal","2":"3.5","3":"-6.9","4":"1.6"},{"1":"Common porpoise","2":"5.6","3":"-4.8","4":"3.7"},{"1":"Potoroo","2":"11.1","3":"0.7","4":"9.2"},{"1":"Giant armadillo","2":"18.1","3":"7.7","4":"16.2"},{"1":"Rock hyrax","2":"5.4","3":"-5.0","4":"3.5"},{"1":"Laboratory rat","2":"13.0","3":"2.6","4":"11.1"},{"1":"African striped mouse","2":"8.7","3":"-1.7","4":"6.8"},{"1":"Squirrel monkey","2":"9.6","3":"-0.8","4":"7.7"},{"1":"Eastern american mole","2":"8.4","3":"-2.0","4":"6.5"},{"1":"Cotton rat","2":"11.3","3":"0.9","4":"9.4"},{"1":"Mole rat","2":"10.6","3":"0.2","4":"8.7"},{"1":"Arctic ground squirrel","2":"16.6","3":"6.2","4":"14.7"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"3.4","4":"11.9"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"5.5","4":"14.0"},{"1":"Musk shrew","2":"12.8","3":"2.4","4":"10.9"},{"1":"Pig","2":"9.1","3":"-1.3","4":"7.2"},{"1":"Short-nosed echidna","2":"8.6","3":"-1.8","4":"6.7"},{"1":"Eastern american chipmunk","2":"15.8","3":"5.4","4":"13.9"},{"1":"Brazilian tapir","2":"4.4","3":"-6.0","4":"2.5"},{"1":"Tenrec","2":"15.6","3":"5.2","4":"13.7"},{"1":"Tree shrew","2":"8.9","3":"-1.5","4":"7.0"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"-5.2","4":"3.3"},{"1":"Genet","2":"6.3","3":"-4.1","4":"4.4"},{"1":"Arctic fox","2":"12.5","3":"2.1","4":"10.6"},{"1":"Red fox","2":"9.8","3":"-0.6","4":"7.9"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>In the below comments, Steve asked about aggregate functions across columns. These functions by nature will want to summarise a column (like shown above), if however you want to <code>sum()</code> or <code>mean()</code> across columns, you might run into errors or absurd answers. In these cases you either can revert to actually spelling out the arithmetics: <code>mutate(average = (sleep_rem + sleep_cycle) / 2)</code> or you have to add a special instruction to the pipe that it should perform these aggregate functions not on the entire column, but by row:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alternative to using the actual arithmetics:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg =</span> <span class="fu">mean</span>(<span class="fu">c</span>(sleep_rem, sleep_cycle)))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["avg"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"12.1","3":"NA","4":"NA","5":"NA"},{"1":"Owl monkey","2":"17.0","3":"1.8","4":"NA","5":"NA"},{"1":"Mountain beaver","2":"14.4","3":"2.4","4":"NA","5":"NA"},{"1":"Greater short-tailed shrew","2":"14.9","3":"2.3","4":"0.1333333","5":"1.2166667"},{"1":"Cow","2":"4.0","3":"0.7","4":"0.6666667","5":"0.6833333"},{"1":"Three-toed sloth","2":"14.4","3":"2.2","4":"0.7666667","5":"1.4833333"},{"1":"Northern fur seal","2":"8.7","3":"1.4","4":"0.3833333","5":"0.8916667"},{"1":"Vesper mouse","2":"7.0","3":"NA","4":"NA","5":"NA"},{"1":"Dog","2":"10.1","3":"2.9","4":"0.3333333","5":"1.6166667"},{"1":"Roe deer","2":"3.0","3":"NA","4":"NA","5":"NA"},{"1":"Goat","2":"5.3","3":"0.6","4":"NA","5":"NA"},{"1":"Guinea pig","2":"9.4","3":"0.8","4":"0.2166667","5":"0.5083333"},{"1":"Grivet","2":"10.0","3":"0.7","4":"NA","5":"NA"},{"1":"Chinchilla","2":"12.5","3":"1.5","4":"0.1166667","5":"0.8083333"},{"1":"Star-nosed mole","2":"10.3","3":"2.2","4":"NA","5":"NA"},{"1":"African giant pouched rat","2":"8.3","3":"2.0","4":"NA","5":"NA"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"1.4","4":"0.1500000","5":"0.7750000"},{"1":"Long-nosed armadillo","2":"17.4","3":"3.1","4":"0.3833333","5":"1.7416667"},{"1":"Tree hyrax","2":"5.3","3":"0.5","4":"NA","5":"NA"},{"1":"North American Opossum","2":"18.0","3":"4.9","4":"0.3333333","5":"2.6166667"},{"1":"Asian elephant","2":"3.9","3":"NA","4":"NA","5":"NA"},{"1":"Big brown bat","2":"19.7","3":"3.9","4":"0.1166667","5":"2.0083333"},{"1":"Horse","2":"2.9","3":"0.6","4":"1.0000000","5":"0.8000000"},{"1":"Donkey","2":"3.1","3":"0.4","4":"NA","5":"NA"},{"1":"European hedgehog","2":"10.1","3":"3.5","4":"0.2833333","5":"1.8916667"},{"1":"Patas monkey","2":"10.9","3":"1.1","4":"NA","5":"NA"},{"1":"Western american chipmunk","2":"14.9","3":"NA","4":"NA","5":"NA"},{"1":"Domestic cat","2":"12.5","3":"3.2","4":"0.4166667","5":"1.8083333"},{"1":"Galago","2":"9.8","3":"1.1","4":"0.5500000","5":"0.8250000"},{"1":"Giraffe","2":"1.9","3":"0.4","4":"NA","5":"NA"},{"1":"Pilot whale","2":"2.7","3":"0.1","4":"NA","5":"NA"},{"1":"Gray seal","2":"6.2","3":"1.5","4":"NA","5":"NA"},{"1":"Gray hyrax","2":"6.3","3":"0.6","4":"NA","5":"NA"},{"1":"Human","2":"8.0","3":"1.9","4":"1.5000000","5":"1.7000000"},{"1":"Mongoose lemur","2":"9.5","3":"0.9","4":"NA","5":"NA"},{"1":"African elephant","2":"3.3","3":"NA","4":"NA","5":"NA"},{"1":"Thick-tailed opposum","2":"19.4","3":"6.6","4":"NA","5":"NA"},{"1":"Macaque","2":"10.1","3":"1.2","4":"0.7500000","5":"0.9750000"},{"1":"Mongolian gerbil","2":"14.2","3":"1.9","4":"NA","5":"NA"},{"1":"Golden hamster","2":"14.3","3":"3.1","4":"0.2000000","5":"1.6500000"},{"1":"Vole","2":"12.8","3":"NA","4":"NA","5":"NA"},{"1":"House mouse","2":"12.5","3":"1.4","4":"0.1833333","5":"0.7916667"},{"1":"Little brown bat","2":"19.9","3":"2.0","4":"0.2000000","5":"1.1000000"},{"1":"Round-tailed muskrat","2":"14.6","3":"NA","4":"NA","5":"NA"},{"1":"Slow loris","2":"11.0","3":"NA","4":"NA","5":"NA"},{"1":"Degu","2":"7.7","3":"0.9","4":"NA","5":"NA"},{"1":"Northern grasshopper mouse","2":"14.5","3":"NA","4":"NA","5":"NA"},{"1":"Rabbit","2":"8.4","3":"0.9","4":"0.4166667","5":"0.6583333"},{"1":"Sheep","2":"3.8","3":"0.6","4":"NA","5":"NA"},{"1":"Chimpanzee","2":"9.7","3":"1.4","4":"1.4166667","5":"1.4083333"},{"1":"Tiger","2":"15.8","3":"NA","4":"NA","5":"NA"},{"1":"Jaguar","2":"10.4","3":"NA","4":"NA","5":"NA"},{"1":"Lion","2":"13.5","3":"NA","4":"NA","5":"NA"},{"1":"Baboon","2":"9.4","3":"1.0","4":"0.6666667","5":"0.8333333"},{"1":"Desert hedgehog","2":"10.3","3":"2.7","4":"NA","5":"NA"},{"1":"Potto","2":"11.0","3":"NA","4":"NA","5":"NA"},{"1":"Deer mouse","2":"11.5","3":"NA","4":"NA","5":"NA"},{"1":"Phalanger","2":"13.7","3":"1.8","4":"NA","5":"NA"},{"1":"Caspian seal","2":"3.5","3":"0.4","4":"NA","5":"NA"},{"1":"Common porpoise","2":"5.6","3":"NA","4":"NA","5":"NA"},{"1":"Potoroo","2":"11.1","3":"1.5","4":"NA","5":"NA"},{"1":"Giant armadillo","2":"18.1","3":"6.1","4":"NA","5":"NA"},{"1":"Rock hyrax","2":"5.4","3":"0.5","4":"NA","5":"NA"},{"1":"Laboratory rat","2":"13.0","3":"2.4","4":"0.1833333","5":"1.2916667"},{"1":"African striped mouse","2":"8.7","3":"NA","4":"NA","5":"NA"},{"1":"Squirrel monkey","2":"9.6","3":"1.4","4":"NA","5":"NA"},{"1":"Eastern american mole","2":"8.4","3":"2.1","4":"0.1666667","5":"1.1333333"},{"1":"Cotton rat","2":"11.3","3":"1.1","4":"0.1500000","5":"0.6250000"},{"1":"Mole rat","2":"10.6","3":"2.4","4":"NA","5":"NA"},{"1":"Arctic ground squirrel","2":"16.6","3":"NA","4":"NA","5":"NA"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"3.4","4":"0.2166667","5":"1.8083333"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"3.0","4":"NA","5":"NA"},{"1":"Musk shrew","2":"12.8","3":"2.0","4":"0.1833333","5":"1.0916667"},{"1":"Pig","2":"9.1","3":"2.4","4":"0.5000000","5":"1.4500000"},{"1":"Short-nosed echidna","2":"8.6","3":"NA","4":"NA","5":"NA"},{"1":"Eastern american chipmunk","2":"15.8","3":"NA","4":"NA","5":"NA"},{"1":"Brazilian tapir","2":"4.4","3":"1.0","4":"0.9000000","5":"0.9500000"},{"1":"Tenrec","2":"15.6","3":"2.3","4":"NA","5":"NA"},{"1":"Tree shrew","2":"8.9","3":"2.6","4":"0.2333333","5":"1.4166667"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"NA","4":"NA","5":"NA"},{"1":"Genet","2":"6.3","3":"1.3","4":"NA","5":"NA"},{"1":"Arctic fox","2":"12.5","3":"NA","4":"NA","5":"NA"},{"1":"Red fox","2":"9.8","3":"2.4","4":"0.3500000","5":"1.3750000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>ifelse()</code> function deserves a special mention because it is particularly useful if you don’t want to mutate the whole column in the same way. With <code>ifelse()</code>, you first specify a logical statement, afterwards what needs to happen if the statement returns <code>TRUE</code>, and lastly what needs to happen if it’s <code>FALSE</code>.</p>
<p>Imagine that we have a database with two large values which we assume are typos or measurement errors, and we want to exclude them. The below code will take any <code>brainwt</code> value above 4 and return NA. In this case, the code won’t change for anything below 4.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, brainwt) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">brainwt2 =</span> <span class="fu">ifelse</span>(brainwt <span class="sc">&gt;</span> <span class="dv">4</span>, <span class="cn">NA</span>, brainwt)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(brainwt))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["brainwt"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["brainwt2"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"African elephant","2":"5.71200","3":"NA"},{"1":"Asian elephant","2":"4.60300","3":"NA"},{"1":"Human","2":"1.32000","3":"1.32000"},{"1":"Horse","2":"0.65500","3":"0.65500"},{"1":"Chimpanzee","2":"0.44000","3":"0.44000"},{"1":"Cow","2":"0.42300","3":"0.42300"},{"1":"Donkey","2":"0.41900","3":"0.41900"},{"1":"Gray seal","2":"0.32500","3":"0.32500"},{"1":"Baboon","2":"0.18000","3":"0.18000"},{"1":"Pig","2":"0.18000","3":"0.18000"},{"1":"Macaque","2":"0.17900","3":"0.17900"},{"1":"Sheep","2":"0.17500","3":"0.17500"},{"1":"Brazilian tapir","2":"0.16900","3":"0.16900"},{"1":"Jaguar","2":"0.15700","3":"0.15700"},{"1":"Goat","2":"0.11500","3":"0.11500"},{"1":"Patas monkey","2":"0.11500","3":"0.11500"},{"1":"Roe deer","2":"0.09820","3":"0.09820"},{"1":"Giant armadillo","2":"0.08100","3":"0.08100"},{"1":"Dog","2":"0.07000","3":"0.07000"},{"1":"Red fox","2":"0.05040","3":"0.05040"},{"1":"Arctic fox","2":"0.04450","3":"0.04450"},{"1":"Domestic cat","2":"0.02560","3":"0.02560"},{"1":"Short-nosed echidna","2":"0.02500","3":"0.02500"},{"1":"Rock hyrax","2":"0.02100","3":"0.02100"},{"1":"Squirrel monkey","2":"0.02000","3":"0.02000"},{"1":"Genet","2":"0.01750","3":"0.01750"},{"1":"Owl monkey","2":"0.01550","3":"0.01550"},{"1":"Slow loris","2":"0.01250","3":"0.01250"},{"1":"Tree hyrax","2":"0.01230","3":"0.01230"},{"1":"Gray hyrax","2":"0.01227","3":"0.01227"},{"1":"Rabbit","2":"0.01210","3":"0.01210"},{"1":"Phalanger","2":"0.01140","3":"0.01140"},{"1":"Long-nosed armadillo","2":"0.01080","3":"0.01080"},{"1":"African giant pouched rat","2":"0.00660","3":"0.00660"},{"1":"Chinchilla","2":"0.00640","3":"0.00640"},{"1":"North American Opossum","2":"0.00630","3":"0.00630"},{"1":"Arctic ground squirrel","2":"0.00570","3":"0.00570"},{"1":"Guinea pig","2":"0.00550","3":"0.00550"},{"1":"Galago","2":"0.00500","3":"0.00500"},{"1":"Thirteen-lined ground squirrel","2":"0.00400","3":"0.00400"},{"1":"European hedgehog","2":"0.00350","3":"0.00350"},{"1":"Mole rat","2":"0.00300","3":"0.00300"},{"1":"Tenrec","2":"0.00260","3":"0.00260"},{"1":"Tree shrew","2":"0.00250","3":"0.00250"},{"1":"Desert hedgehog","2":"0.00240","3":"0.00240"},{"1":"Laboratory rat","2":"0.00190","3":"0.00190"},{"1":"Eastern american mole","2":"0.00120","3":"0.00120"},{"1":"Cotton rat","2":"0.00118","3":"0.00118"},{"1":"Star-nosed mole","2":"0.00100","3":"0.00100"},{"1":"Golden hamster","2":"0.00100","3":"0.00100"},{"1":"House mouse","2":"0.00040","3":"0.00040"},{"1":"Musk shrew","2":"0.00033","3":"0.00033"},{"1":"Big brown bat","2":"0.00030","3":"0.00030"},{"1":"Greater short-tailed shrew","2":"0.00029","3":"0.00029"},{"1":"Little brown bat","2":"0.00025","3":"0.00025"},{"1":"Lesser short-tailed shrew","2":"0.00014","3":"0.00014"},{"1":"Cheetah","2":"NA","3":"NA"},{"1":"Mountain beaver","2":"NA","3":"NA"},{"1":"Three-toed sloth","2":"NA","3":"NA"},{"1":"Northern fur seal","2":"NA","3":"NA"},{"1":"Vesper mouse","2":"NA","3":"NA"},{"1":"Grivet","2":"NA","3":"NA"},{"1":"Western american chipmunk","2":"NA","3":"NA"},{"1":"Giraffe","2":"NA","3":"NA"},{"1":"Pilot whale","2":"NA","3":"NA"},{"1":"Mongoose lemur","2":"NA","3":"NA"},{"1":"Thick-tailed opposum","2":"NA","3":"NA"},{"1":"Mongolian gerbil","2":"NA","3":"NA"},{"1":"Vole","2":"NA","3":"NA"},{"1":"Round-tailed muskrat","2":"NA","3":"NA"},{"1":"Degu","2":"NA","3":"NA"},{"1":"Northern grasshopper mouse","2":"NA","3":"NA"},{"1":"Tiger","2":"NA","3":"NA"},{"1":"Lion","2":"NA","3":"NA"},{"1":"Potto","2":"NA","3":"NA"},{"1":"Deer mouse","2":"NA","3":"NA"},{"1":"Caspian seal","2":"NA","3":"NA"},{"1":"Common porpoise","2":"NA","3":"NA"},{"1":"Potoroo","2":"NA","3":"NA"},{"1":"African striped mouse","2":"NA","3":"NA"},{"1":"Golden-mantled ground squirrel","2":"NA","3":"NA"},{"1":"Eastern american chipmunk","2":"NA","3":"NA"},{"1":"Bottle-nosed dolphin","2":"NA","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can also mutate string columns with stringr’s <code>str_extract()</code> function in combination with any character or regex patterns.<br />
The sample code will return the last word of the animal name and makes it lower case.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name_last_word =</span> <span class="fu">tolower</span>(<span class="fu">str_extract</span>(name, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+$&quot;</span>)))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["name_last_word"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah","2":"cheetah"},{"1":"Owl monkey","2":"monkey"},{"1":"Mountain beaver","2":"beaver"},{"1":"Greater short-tailed shrew","2":"shrew"},{"1":"Cow","2":"cow"},{"1":"Three-toed sloth","2":"sloth"},{"1":"Northern fur seal","2":"seal"},{"1":"Vesper mouse","2":"mouse"},{"1":"Dog","2":"dog"},{"1":"Roe deer","2":"deer"},{"1":"Goat","2":"goat"},{"1":"Guinea pig","2":"pig"},{"1":"Grivet","2":"grivet"},{"1":"Chinchilla","2":"chinchilla"},{"1":"Star-nosed mole","2":"mole"},{"1":"African giant pouched rat","2":"rat"},{"1":"Lesser short-tailed shrew","2":"shrew"},{"1":"Long-nosed armadillo","2":"armadillo"},{"1":"Tree hyrax","2":"hyrax"},{"1":"North American Opossum","2":"opossum"},{"1":"Asian elephant","2":"elephant"},{"1":"Big brown bat","2":"bat"},{"1":"Horse","2":"horse"},{"1":"Donkey","2":"donkey"},{"1":"European hedgehog","2":"hedgehog"},{"1":"Patas monkey","2":"monkey"},{"1":"Western american chipmunk","2":"chipmunk"},{"1":"Domestic cat","2":"cat"},{"1":"Galago","2":"galago"},{"1":"Giraffe","2":"giraffe"},{"1":"Pilot whale","2":"whale"},{"1":"Gray seal","2":"seal"},{"1":"Gray hyrax","2":"hyrax"},{"1":"Human","2":"human"},{"1":"Mongoose lemur","2":"lemur"},{"1":"African elephant","2":"elephant"},{"1":"Thick-tailed opposum","2":"opposum"},{"1":"Macaque","2":"macaque"},{"1":"Mongolian gerbil","2":"gerbil"},{"1":"Golden hamster","2":"hamster"},{"1":"Vole","2":"NA"},{"1":"House mouse","2":"mouse"},{"1":"Little brown bat","2":"bat"},{"1":"Round-tailed muskrat","2":"muskrat"},{"1":"Slow loris","2":"loris"},{"1":"Degu","2":"degu"},{"1":"Northern grasshopper mouse","2":"mouse"},{"1":"Rabbit","2":"rabbit"},{"1":"Sheep","2":"sheep"},{"1":"Chimpanzee","2":"chimpanzee"},{"1":"Tiger","2":"tiger"},{"1":"Jaguar","2":"jaguar"},{"1":"Lion","2":"lion"},{"1":"Baboon","2":"baboon"},{"1":"Desert hedgehog","2":"hedgehog"},{"1":"Potto","2":"potto"},{"1":"Deer mouse","2":"mouse"},{"1":"Phalanger","2":"phalanger"},{"1":"Caspian seal","2":"seal"},{"1":"Common porpoise","2":"porpoise"},{"1":"Potoroo","2":"potoroo"},{"1":"Giant armadillo","2":"armadillo"},{"1":"Rock hyrax","2":"hyrax"},{"1":"Laboratory rat","2":"rat"},{"1":"African striped mouse","2":"mouse"},{"1":"Squirrel monkey","2":"monkey"},{"1":"Eastern american mole","2":"mole"},{"1":"Cotton rat","2":"rat"},{"1":"Mole rat","2":"rat"},{"1":"Arctic ground squirrel","2":"squirrel"},{"1":"Thirteen-lined ground squirrel","2":"squirrel"},{"1":"Golden-mantled ground squirrel","2":"squirrel"},{"1":"Musk shrew","2":"shrew"},{"1":"Pig","2":"pig"},{"1":"Short-nosed echidna","2":"echidna"},{"1":"Eastern american chipmunk","2":"chipmunk"},{"1":"Brazilian tapir","2":"tapir"},{"1":"Tenrec","2":"tenrec"},{"1":"Tree shrew","2":"shrew"},{"1":"Bottle-nosed dolphin","2":"dolphin"},{"1":"Genet","2":"genet"},{"1":"Arctic fox","2":"fox"},{"1":"Red fox","2":"fox"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br></p>
</div>
<div id="mutating-several-columns-at-once" class="section level2" number="0.2">
<h2 number="0.2"><span class="header-section-number">0.2</span> <strong>Mutating several columns at once</strong></h2>
<p>This is where the magic really happens. Just like with the <code>select()</code> functions in part 1, there are variants to <code>mutate()</code>:</p>
<ul>
<li><code>mutate_all()</code> will mutate all columns based on your further instructions</li>
<li><code>mutate_if()</code> first requires a function that returns a boolean to select columns. If that is true, the mutate instructions will be followed on those variables.</li>
<li><code>mutate_at()</code> requires you to specify columns inside a <code>vars()</code> argument for which the mutation will be done.</li>
</ul>
<div id="mutate-all" class="section level3" number="0.2.1">
<h3 number="0.2.1"><span class="header-section-number">0.2.1</span> <strong>Mutate all</strong></h3>
<p>The <code>mutate_all()</code> version is the easiest to understand, and pretty nifty when cleaning your data. You just pass an action (in the form of a function) that you want to apply across all columns.</p>
<p>Something easy to start with: turning all the data to lower case:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(tolower)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["genus"],"name":[2],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[3],"type":["chr"],"align":["left"]},{"label":["order"],"name":[4],"type":["chr"],"align":["left"]},{"label":["conservation"],"name":[5],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[6],"type":["chr"],"align":["left"]},{"label":["sleep_rem"],"name":[7],"type":["chr"],"align":["left"]},{"label":["sleep_cycle"],"name":[8],"type":["chr"],"align":["left"]},{"label":["awake"],"name":[9],"type":["chr"],"align":["left"]},{"label":["brainwt"],"name":[10],"type":["chr"],"align":["left"]},{"label":["bodywt"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"cheetah","2":"acinonyx","3":"carni","4":"carnivora","5":"lc","6":"12.1","7":"NA","8":"NA","9":"11.9","10":"NA","11":"50"},{"1":"owl monkey","2":"aotus","3":"omni","4":"primates","5":"NA","6":"17","7":"1.8","8":"NA","9":"7","10":"0.0155","11":"0.48"},{"1":"mountain beaver","2":"aplodontia","3":"herbi","4":"rodentia","5":"nt","6":"14.4","7":"2.4","8":"NA","9":"9.6","10":"NA","11":"1.35"},{"1":"greater short-tailed shrew","2":"blarina","3":"omni","4":"soricomorpha","5":"lc","6":"14.9","7":"2.3","8":"0.133333333","9":"9.1","10":"0.00029","11":"0.019"},{"1":"cow","2":"bos","3":"herbi","4":"artiodactyla","5":"domesticated","6":"4","7":"0.7","8":"0.666666667","9":"20","10":"0.423","11":"600"},{"1":"three-toed sloth","2":"bradypus","3":"herbi","4":"pilosa","5":"NA","6":"14.4","7":"2.2","8":"0.766666667","9":"9.6","10":"NA","11":"3.85"},{"1":"northern fur seal","2":"callorhinus","3":"carni","4":"carnivora","5":"vu","6":"8.7","7":"1.4","8":"0.383333333","9":"15.3","10":"NA","11":"20.49"},{"1":"vesper mouse","2":"calomys","3":"NA","4":"rodentia","5":"NA","6":"7","7":"NA","8":"NA","9":"17","10":"NA","11":"0.045"},{"1":"dog","2":"canis","3":"carni","4":"carnivora","5":"domesticated","6":"10.1","7":"2.9","8":"0.333333333","9":"13.9","10":"0.07","11":"14"},{"1":"roe deer","2":"capreolus","3":"herbi","4":"artiodactyla","5":"lc","6":"3","7":"NA","8":"NA","9":"21","10":"0.0982","11":"14.8"},{"1":"goat","2":"capri","3":"herbi","4":"artiodactyla","5":"lc","6":"5.3","7":"0.6","8":"NA","9":"18.7","10":"0.115","11":"33.5"},{"1":"guinea pig","2":"cavis","3":"herbi","4":"rodentia","5":"domesticated","6":"9.4","7":"0.8","8":"0.216666667","9":"14.6","10":"0.0055","11":"0.728"},{"1":"grivet","2":"cercopithecus","3":"omni","4":"primates","5":"lc","6":"10","7":"0.7","8":"NA","9":"14","10":"NA","11":"4.75"},{"1":"chinchilla","2":"chinchilla","3":"herbi","4":"rodentia","5":"domesticated","6":"12.5","7":"1.5","8":"0.116666667","9":"11.5","10":"0.0064","11":"0.42"},{"1":"star-nosed mole","2":"condylura","3":"omni","4":"soricomorpha","5":"lc","6":"10.3","7":"2.2","8":"NA","9":"13.7","10":"0.001","11":"0.06"},{"1":"african giant pouched rat","2":"cricetomys","3":"omni","4":"rodentia","5":"NA","6":"8.3","7":"2","8":"NA","9":"15.7","10":"0.0066","11":"1"},{"1":"lesser short-tailed shrew","2":"cryptotis","3":"omni","4":"soricomorpha","5":"lc","6":"9.1","7":"1.4","8":"0.15","9":"14.9","10":"0.00014","11":"0.005"},{"1":"long-nosed armadillo","2":"dasypus","3":"carni","4":"cingulata","5":"lc","6":"17.4","7":"3.1","8":"0.383333333","9":"6.6","10":"0.0108","11":"3.5"},{"1":"tree hyrax","2":"dendrohyrax","3":"herbi","4":"hyracoidea","5":"lc","6":"5.3","7":"0.5","8":"NA","9":"18.7","10":"0.0123","11":"2.95"},{"1":"north american opossum","2":"didelphis","3":"omni","4":"didelphimorphia","5":"lc","6":"18","7":"4.9","8":"0.333333333","9":"6","10":"0.0063","11":"1.7"},{"1":"asian elephant","2":"elephas","3":"herbi","4":"proboscidea","5":"en","6":"3.9","7":"NA","8":"NA","9":"20.1","10":"4.603","11":"2547"},{"1":"big brown bat","2":"eptesicus","3":"insecti","4":"chiroptera","5":"lc","6":"19.7","7":"3.9","8":"0.116666667","9":"4.3","10":"0.0003","11":"0.023"},{"1":"horse","2":"equus","3":"herbi","4":"perissodactyla","5":"domesticated","6":"2.9","7":"0.6","8":"1","9":"21.1","10":"0.655","11":"521"},{"1":"donkey","2":"equus","3":"herbi","4":"perissodactyla","5":"domesticated","6":"3.1","7":"0.4","8":"NA","9":"20.9","10":"0.419","11":"187"},{"1":"european hedgehog","2":"erinaceus","3":"omni","4":"erinaceomorpha","5":"lc","6":"10.1","7":"3.5","8":"0.283333333","9":"13.9","10":"0.0035","11":"0.77"},{"1":"patas monkey","2":"erythrocebus","3":"omni","4":"primates","5":"lc","6":"10.9","7":"1.1","8":"NA","9":"13.1","10":"0.115","11":"10"},{"1":"western american chipmunk","2":"eutamias","3":"herbi","4":"rodentia","5":"NA","6":"14.9","7":"NA","8":"NA","9":"9.1","10":"NA","11":"0.071"},{"1":"domestic cat","2":"felis","3":"carni","4":"carnivora","5":"domesticated","6":"12.5","7":"3.2","8":"0.416666667","9":"11.5","10":"0.0256","11":"3.3"},{"1":"galago","2":"galago","3":"omni","4":"primates","5":"NA","6":"9.8","7":"1.1","8":"0.55","9":"14.2","10":"0.005","11":"0.2"},{"1":"giraffe","2":"giraffa","3":"herbi","4":"artiodactyla","5":"cd","6":"1.9","7":"0.4","8":"NA","9":"22.1","10":"NA","11":"899.995"},{"1":"pilot whale","2":"globicephalus","3":"carni","4":"cetacea","5":"cd","6":"2.7","7":"0.1","8":"NA","9":"21.35","10":"NA","11":"800"},{"1":"gray seal","2":"haliochoerus","3":"carni","4":"carnivora","5":"lc","6":"6.2","7":"1.5","8":"NA","9":"17.8","10":"0.325","11":"85"},{"1":"gray hyrax","2":"heterohyrax","3":"herbi","4":"hyracoidea","5":"lc","6":"6.3","7":"0.6","8":"NA","9":"17.7","10":"0.01227","11":"2.625"},{"1":"human","2":"homo","3":"omni","4":"primates","5":"NA","6":"8","7":"1.9","8":"1.5","9":"16","10":"1.32","11":"62"},{"1":"mongoose lemur","2":"lemur","3":"herbi","4":"primates","5":"vu","6":"9.5","7":"0.9","8":"NA","9":"14.5","10":"NA","11":"1.67"},{"1":"african elephant","2":"loxodonta","3":"herbi","4":"proboscidea","5":"vu","6":"3.3","7":"NA","8":"NA","9":"20.7","10":"5.712","11":"6654"},{"1":"thick-tailed opposum","2":"lutreolina","3":"carni","4":"didelphimorphia","5":"lc","6":"19.4","7":"6.6","8":"NA","9":"4.6","10":"NA","11":"0.37"},{"1":"macaque","2":"macaca","3":"omni","4":"primates","5":"NA","6":"10.1","7":"1.2","8":"0.75","9":"13.9","10":"0.179","11":"6.8"},{"1":"mongolian gerbil","2":"meriones","3":"herbi","4":"rodentia","5":"lc","6":"14.2","7":"1.9","8":"NA","9":"9.8","10":"NA","11":"0.053"},{"1":"golden hamster","2":"mesocricetus","3":"herbi","4":"rodentia","5":"en","6":"14.3","7":"3.1","8":"0.2","9":"9.7","10":"0.001","11":"0.12"},{"1":"vole","2":"microtus","3":"herbi","4":"rodentia","5":"NA","6":"12.8","7":"NA","8":"NA","9":"11.2","10":"NA","11":"0.035"},{"1":"house mouse","2":"mus","3":"herbi","4":"rodentia","5":"nt","6":"12.5","7":"1.4","8":"0.183333333","9":"11.5","10":"0.0004","11":"0.022"},{"1":"little brown bat","2":"myotis","3":"insecti","4":"chiroptera","5":"NA","6":"19.9","7":"2","8":"0.2","9":"4.1","10":"0.00025","11":"0.01"},{"1":"round-tailed muskrat","2":"neofiber","3":"herbi","4":"rodentia","5":"nt","6":"14.6","7":"NA","8":"NA","9":"9.4","10":"NA","11":"0.266"},{"1":"slow loris","2":"nyctibeus","3":"carni","4":"primates","5":"NA","6":"11","7":"NA","8":"NA","9":"13","10":"0.0125","11":"1.4"},{"1":"degu","2":"octodon","3":"herbi","4":"rodentia","5":"lc","6":"7.7","7":"0.9","8":"NA","9":"16.3","10":"NA","11":"0.21"},{"1":"northern grasshopper mouse","2":"onychomys","3":"carni","4":"rodentia","5":"lc","6":"14.5","7":"NA","8":"NA","9":"9.5","10":"NA","11":"0.028"},{"1":"rabbit","2":"oryctolagus","3":"herbi","4":"lagomorpha","5":"domesticated","6":"8.4","7":"0.9","8":"0.416666667","9":"15.6","10":"0.0121","11":"2.5"},{"1":"sheep","2":"ovis","3":"herbi","4":"artiodactyla","5":"domesticated","6":"3.8","7":"0.6","8":"NA","9":"20.2","10":"0.175","11":"55.5"},{"1":"chimpanzee","2":"pan","3":"omni","4":"primates","5":"NA","6":"9.7","7":"1.4","8":"1.416666667","9":"14.3","10":"0.44","11":"52.2"},{"1":"tiger","2":"panthera","3":"carni","4":"carnivora","5":"en","6":"15.8","7":"NA","8":"NA","9":"8.2","10":"NA","11":"162.564"},{"1":"jaguar","2":"panthera","3":"carni","4":"carnivora","5":"nt","6":"10.4","7":"NA","8":"NA","9":"13.6","10":"0.157","11":"100"},{"1":"lion","2":"panthera","3":"carni","4":"carnivora","5":"vu","6":"13.5","7":"NA","8":"NA","9":"10.5","10":"NA","11":"161.499"},{"1":"baboon","2":"papio","3":"omni","4":"primates","5":"NA","6":"9.4","7":"1","8":"0.666666667","9":"14.6","10":"0.18","11":"25.235"},{"1":"desert hedgehog","2":"paraechinus","3":"NA","4":"erinaceomorpha","5":"lc","6":"10.3","7":"2.7","8":"NA","9":"13.7","10":"0.0024","11":"0.55"},{"1":"potto","2":"perodicticus","3":"omni","4":"primates","5":"lc","6":"11","7":"NA","8":"NA","9":"13","10":"NA","11":"1.1"},{"1":"deer mouse","2":"peromyscus","3":"NA","4":"rodentia","5":"NA","6":"11.5","7":"NA","8":"NA","9":"12.5","10":"NA","11":"0.021"},{"1":"phalanger","2":"phalanger","3":"NA","4":"diprotodontia","5":"NA","6":"13.7","7":"1.8","8":"NA","9":"10.3","10":"0.0114","11":"1.62"},{"1":"caspian seal","2":"phoca","3":"carni","4":"carnivora","5":"vu","6":"3.5","7":"0.4","8":"NA","9":"20.5","10":"NA","11":"86"},{"1":"common porpoise","2":"phocoena","3":"carni","4":"cetacea","5":"vu","6":"5.6","7":"NA","8":"NA","9":"18.45","10":"NA","11":"53.18"},{"1":"potoroo","2":"potorous","3":"herbi","4":"diprotodontia","5":"NA","6":"11.1","7":"1.5","8":"NA","9":"12.9","10":"NA","11":"1.1"},{"1":"giant armadillo","2":"priodontes","3":"insecti","4":"cingulata","5":"en","6":"18.1","7":"6.1","8":"NA","9":"5.9","10":"0.081","11":"60"},{"1":"rock hyrax","2":"procavia","3":"NA","4":"hyracoidea","5":"lc","6":"5.4","7":"0.5","8":"NA","9":"18.6","10":"0.021","11":"3.6"},{"1":"laboratory rat","2":"rattus","3":"herbi","4":"rodentia","5":"lc","6":"13","7":"2.4","8":"0.183333333","9":"11","10":"0.0019","11":"0.32"},{"1":"african striped mouse","2":"rhabdomys","3":"omni","4":"rodentia","5":"NA","6":"8.7","7":"NA","8":"NA","9":"15.3","10":"NA","11":"0.044"},{"1":"squirrel monkey","2":"saimiri","3":"omni","4":"primates","5":"NA","6":"9.6","7":"1.4","8":"NA","9":"14.4","10":"0.02","11":"0.743"},{"1":"eastern american mole","2":"scalopus","3":"insecti","4":"soricomorpha","5":"lc","6":"8.4","7":"2.1","8":"0.166666667","9":"15.6","10":"0.0012","11":"0.075"},{"1":"cotton rat","2":"sigmodon","3":"herbi","4":"rodentia","5":"NA","6":"11.3","7":"1.1","8":"0.15","9":"12.7","10":"0.00118","11":"0.148"},{"1":"mole rat","2":"spalax","3":"NA","4":"rodentia","5":"NA","6":"10.6","7":"2.4","8":"NA","9":"13.4","10":"0.003","11":"0.122"},{"1":"arctic ground squirrel","2":"spermophilus","3":"herbi","4":"rodentia","5":"lc","6":"16.6","7":"NA","8":"NA","9":"7.4","10":"0.0057","11":"0.92"},{"1":"thirteen-lined ground squirrel","2":"spermophilus","3":"herbi","4":"rodentia","5":"lc","6":"13.8","7":"3.4","8":"0.216666667","9":"10.2","10":"0.004","11":"0.101"},{"1":"golden-mantled ground squirrel","2":"spermophilus","3":"herbi","4":"rodentia","5":"lc","6":"15.9","7":"3","8":"NA","9":"8.1","10":"NA","11":"0.205"},{"1":"musk shrew","2":"suncus","3":"NA","4":"soricomorpha","5":"NA","6":"12.8","7":"2","8":"0.183333333","9":"11.2","10":"0.00033","11":"0.048"},{"1":"pig","2":"sus","3":"omni","4":"artiodactyla","5":"domesticated","6":"9.1","7":"2.4","8":"0.5","9":"14.9","10":"0.18","11":"86.25"},{"1":"short-nosed echidna","2":"tachyglossus","3":"insecti","4":"monotremata","5":"NA","6":"8.6","7":"NA","8":"NA","9":"15.4","10":"0.025","11":"4.5"},{"1":"eastern american chipmunk","2":"tamias","3":"herbi","4":"rodentia","5":"NA","6":"15.8","7":"NA","8":"NA","9":"8.2","10":"NA","11":"0.112"},{"1":"brazilian tapir","2":"tapirus","3":"herbi","4":"perissodactyla","5":"vu","6":"4.4","7":"1","8":"0.9","9":"19.6","10":"0.169","11":"207.501"},{"1":"tenrec","2":"tenrec","3":"omni","4":"afrosoricida","5":"NA","6":"15.6","7":"2.3","8":"NA","9":"8.4","10":"0.0026","11":"0.9"},{"1":"tree shrew","2":"tupaia","3":"omni","4":"scandentia","5":"NA","6":"8.9","7":"2.6","8":"0.233333333","9":"15.1","10":"0.0025","11":"0.104"},{"1":"bottle-nosed dolphin","2":"tursiops","3":"carni","4":"cetacea","5":"NA","6":"5.2","7":"NA","8":"NA","9":"18.8","10":"NA","11":"173.33"},{"1":"genet","2":"genetta","3":"carni","4":"carnivora","5":"NA","6":"6.3","7":"1.3","8":"NA","9":"17.7","10":"0.0175","11":"2"},{"1":"arctic fox","2":"vulpes","3":"carni","4":"carnivora","5":"NA","6":"12.5","7":"NA","8":"NA","9":"11.5","10":"0.0445","11":"3.38"},{"1":"red fox","2":"vulpes","3":"carni","4":"carnivora","5":"NA","6":"9.8","7":"2.4","8":"0.35","9":"14.2","10":"0.0504","11":"4.23"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The mutating action needs to be a function: in many cases you can pass the function name without the brackets, but in some cases you need arguments or you want to combine elements. In this case you have some options: either you make a function up front (useful if it’s longer), or you make a function on the fly by wrapping it inside <code>funs()</code> or via a tilde.</p>
<p>The below paste mutation requires a function on the fly. You can either use <code>~paste(., "  /n  ")</code> or <code>funs(paste(., "  /n  "))</code>. When making a function on the fly, you usually need a way to refer to the value you are replacing: which is what the <code>.</code> symbolizes.</p>
<p>For instance, after scraping the web, you often have tables with too many spaces and extra <code>\n</code> signs, but you can clean it all in one go.</p>
<p>I’m first going to use <code>mutate_all()</code> to screw things up:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>msleep_ohno <span class="ot">&lt;-</span> msleep <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">paste</span>(., <span class="st">&quot;  /n  &quot;</span>))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>msleep_ohno[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["genus"],"name":[2],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[3],"type":["chr"],"align":["left"]},{"label":["order"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah   /n","2":"Acinonyx   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Owl monkey   /n","2":"Aotus   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Mountain beaver   /n","2":"Aplodontia   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Greater short-tailed shrew   /n","2":"Blarina   /n","3":"omni   /n","4":"Soricomorpha   /n"},{"1":"Cow   /n","2":"Bos   /n","3":"herbi   /n","4":"Artiodactyla   /n"},{"1":"Three-toed sloth   /n","2":"Bradypus   /n","3":"herbi   /n","4":"Pilosa   /n"},{"1":"Northern fur seal   /n","2":"Callorhinus   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Vesper mouse   /n","2":"Calomys   /n","3":"NA   /n","4":"Rodentia   /n"},{"1":"Dog   /n","2":"Canis   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Roe deer   /n","2":"Capreolus   /n","3":"herbi   /n","4":"Artiodactyla   /n"},{"1":"Goat   /n","2":"Capri   /n","3":"herbi   /n","4":"Artiodactyla   /n"},{"1":"Guinea pig   /n","2":"Cavis   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Grivet   /n","2":"Cercopithecus   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Chinchilla   /n","2":"Chinchilla   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Star-nosed mole   /n","2":"Condylura   /n","3":"omni   /n","4":"Soricomorpha   /n"},{"1":"African giant pouched rat   /n","2":"Cricetomys   /n","3":"omni   /n","4":"Rodentia   /n"},{"1":"Lesser short-tailed shrew   /n","2":"Cryptotis   /n","3":"omni   /n","4":"Soricomorpha   /n"},{"1":"Long-nosed armadillo   /n","2":"Dasypus   /n","3":"carni   /n","4":"Cingulata   /n"},{"1":"Tree hyrax   /n","2":"Dendrohyrax   /n","3":"herbi   /n","4":"Hyracoidea   /n"},{"1":"North American Opossum   /n","2":"Didelphis   /n","3":"omni   /n","4":"Didelphimorphia   /n"},{"1":"Asian elephant   /n","2":"Elephas   /n","3":"herbi   /n","4":"Proboscidea   /n"},{"1":"Big brown bat   /n","2":"Eptesicus   /n","3":"insecti   /n","4":"Chiroptera   /n"},{"1":"Horse   /n","2":"Equus   /n","3":"herbi   /n","4":"Perissodactyla   /n"},{"1":"Donkey   /n","2":"Equus   /n","3":"herbi   /n","4":"Perissodactyla   /n"},{"1":"European hedgehog   /n","2":"Erinaceus   /n","3":"omni   /n","4":"Erinaceomorpha   /n"},{"1":"Patas monkey   /n","2":"Erythrocebus   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Western american chipmunk   /n","2":"Eutamias   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Domestic cat   /n","2":"Felis   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Galago   /n","2":"Galago   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Giraffe   /n","2":"Giraffa   /n","3":"herbi   /n","4":"Artiodactyla   /n"},{"1":"Pilot whale   /n","2":"Globicephalus   /n","3":"carni   /n","4":"Cetacea   /n"},{"1":"Gray seal   /n","2":"Haliochoerus   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Gray hyrax   /n","2":"Heterohyrax   /n","3":"herbi   /n","4":"Hyracoidea   /n"},{"1":"Human   /n","2":"Homo   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Mongoose lemur   /n","2":"Lemur   /n","3":"herbi   /n","4":"Primates   /n"},{"1":"African elephant   /n","2":"Loxodonta   /n","3":"herbi   /n","4":"Proboscidea   /n"},{"1":"Thick-tailed opposum   /n","2":"Lutreolina   /n","3":"carni   /n","4":"Didelphimorphia   /n"},{"1":"Macaque   /n","2":"Macaca   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Mongolian gerbil   /n","2":"Meriones   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Golden hamster   /n","2":"Mesocricetus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Vole    /n","2":"Microtus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"House mouse   /n","2":"Mus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Little brown bat   /n","2":"Myotis   /n","3":"insecti   /n","4":"Chiroptera   /n"},{"1":"Round-tailed muskrat   /n","2":"Neofiber   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Slow loris   /n","2":"Nyctibeus   /n","3":"carni   /n","4":"Primates   /n"},{"1":"Degu   /n","2":"Octodon   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Northern grasshopper mouse   /n","2":"Onychomys   /n","3":"carni   /n","4":"Rodentia   /n"},{"1":"Rabbit   /n","2":"Oryctolagus   /n","3":"herbi   /n","4":"Lagomorpha   /n"},{"1":"Sheep   /n","2":"Ovis   /n","3":"herbi   /n","4":"Artiodactyla   /n"},{"1":"Chimpanzee   /n","2":"Pan   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Tiger   /n","2":"Panthera   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Jaguar   /n","2":"Panthera   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Lion   /n","2":"Panthera   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Baboon   /n","2":"Papio   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Desert hedgehog   /n","2":"Paraechinus   /n","3":"NA   /n","4":"Erinaceomorpha   /n"},{"1":"Potto   /n","2":"Perodicticus   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Deer mouse   /n","2":"Peromyscus   /n","3":"NA   /n","4":"Rodentia   /n"},{"1":"Phalanger   /n","2":"Phalanger   /n","3":"NA   /n","4":"Diprotodontia   /n"},{"1":"Caspian seal   /n","2":"Phoca   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Common porpoise   /n","2":"Phocoena   /n","3":"carni   /n","4":"Cetacea   /n"},{"1":"Potoroo   /n","2":"Potorous   /n","3":"herbi   /n","4":"Diprotodontia   /n"},{"1":"Giant armadillo   /n","2":"Priodontes   /n","3":"insecti   /n","4":"Cingulata   /n"},{"1":"Rock hyrax   /n","2":"Procavia   /n","3":"NA   /n","4":"Hyracoidea   /n"},{"1":"Laboratory rat   /n","2":"Rattus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"African striped mouse   /n","2":"Rhabdomys   /n","3":"omni   /n","4":"Rodentia   /n"},{"1":"Squirrel monkey   /n","2":"Saimiri   /n","3":"omni   /n","4":"Primates   /n"},{"1":"Eastern american mole   /n","2":"Scalopus   /n","3":"insecti   /n","4":"Soricomorpha   /n"},{"1":"Cotton rat   /n","2":"Sigmodon   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Mole rat   /n","2":"Spalax   /n","3":"NA   /n","4":"Rodentia   /n"},{"1":"Arctic ground squirrel   /n","2":"Spermophilus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Thirteen-lined ground squirrel   /n","2":"Spermophilus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Golden-mantled ground squirrel   /n","2":"Spermophilus   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Musk shrew   /n","2":"Suncus   /n","3":"NA   /n","4":"Soricomorpha   /n"},{"1":"Pig   /n","2":"Sus   /n","3":"omni   /n","4":"Artiodactyla   /n"},{"1":"Short-nosed echidna   /n","2":"Tachyglossus   /n","3":"insecti   /n","4":"Monotremata   /n"},{"1":"Eastern american chipmunk   /n","2":"Tamias   /n","3":"herbi   /n","4":"Rodentia   /n"},{"1":"Brazilian tapir   /n","2":"Tapirus   /n","3":"herbi   /n","4":"Perissodactyla   /n"},{"1":"Tenrec   /n","2":"Tenrec   /n","3":"omni   /n","4":"Afrosoricida   /n"},{"1":"Tree shrew   /n","2":"Tupaia   /n","3":"omni   /n","4":"Scandentia   /n"},{"1":"Bottle-nosed dolphin   /n","2":"Tursiops   /n","3":"carni   /n","4":"Cetacea   /n"},{"1":"Genet   /n","2":"Genetta   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Arctic fox   /n","2":"Vulpes   /n","3":"carni   /n","4":"Carnivora   /n"},{"1":"Red fox   /n","2":"Vulpes   /n","3":"carni   /n","4":"Carnivora   /n"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Let’s clean it up again:<br />
In this code I am assume that not all values show the same amount of extra white spaces as is often the case with parsed data: it first removes any <code>/n</code>, and then trims any additional white spaces:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>msleep_corr <span class="ot">&lt;-</span> msleep_ohno <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;/n&quot;</span>, <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(str_trim)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>msleep_corr[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["genus"],"name":[2],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[3],"type":["chr"],"align":["left"]},{"label":["order"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah","2":"Acinonyx","3":"carni","4":"Carnivora"},{"1":"Owl monkey","2":"Aotus","3":"omni","4":"Primates"},{"1":"Mountain beaver","2":"Aplodontia","3":"herbi","4":"Rodentia"},{"1":"Greater short-tailed shrew","2":"Blarina","3":"omni","4":"Soricomorpha"},{"1":"Cow","2":"Bos","3":"herbi","4":"Artiodactyla"},{"1":"Three-toed sloth","2":"Bradypus","3":"herbi","4":"Pilosa"},{"1":"Northern fur seal","2":"Callorhinus","3":"carni","4":"Carnivora"},{"1":"Vesper mouse","2":"Calomys","3":"__NA__","4":"Rodentia"},{"1":"Dog","2":"Canis","3":"carni","4":"Carnivora"},{"1":"Roe deer","2":"Capreolus","3":"herbi","4":"Artiodactyla"},{"1":"Goat","2":"Capri","3":"herbi","4":"Artiodactyla"},{"1":"Guinea pig","2":"Cavis","3":"herbi","4":"Rodentia"},{"1":"Grivet","2":"Cercopithecus","3":"omni","4":"Primates"},{"1":"Chinchilla","2":"Chinchilla","3":"herbi","4":"Rodentia"},{"1":"Star-nosed mole","2":"Condylura","3":"omni","4":"Soricomorpha"},{"1":"African giant pouched rat","2":"Cricetomys","3":"omni","4":"Rodentia"},{"1":"Lesser short-tailed shrew","2":"Cryptotis","3":"omni","4":"Soricomorpha"},{"1":"Long-nosed armadillo","2":"Dasypus","3":"carni","4":"Cingulata"},{"1":"Tree hyrax","2":"Dendrohyrax","3":"herbi","4":"Hyracoidea"},{"1":"North American Opossum","2":"Didelphis","3":"omni","4":"Didelphimorphia"},{"1":"Asian elephant","2":"Elephas","3":"herbi","4":"Proboscidea"},{"1":"Big brown bat","2":"Eptesicus","3":"insecti","4":"Chiroptera"},{"1":"Horse","2":"Equus","3":"herbi","4":"Perissodactyla"},{"1":"Donkey","2":"Equus","3":"herbi","4":"Perissodactyla"},{"1":"European hedgehog","2":"Erinaceus","3":"omni","4":"Erinaceomorpha"},{"1":"Patas monkey","2":"Erythrocebus","3":"omni","4":"Primates"},{"1":"Western american chipmunk","2":"Eutamias","3":"herbi","4":"Rodentia"},{"1":"Domestic cat","2":"Felis","3":"carni","4":"Carnivora"},{"1":"Galago","2":"Galago","3":"omni","4":"Primates"},{"1":"Giraffe","2":"Giraffa","3":"herbi","4":"Artiodactyla"},{"1":"Pilot whale","2":"Globicephalus","3":"carni","4":"Cetacea"},{"1":"Gray seal","2":"Haliochoerus","3":"carni","4":"Carnivora"},{"1":"Gray hyrax","2":"Heterohyrax","3":"herbi","4":"Hyracoidea"},{"1":"Human","2":"Homo","3":"omni","4":"Primates"},{"1":"Mongoose lemur","2":"Lemur","3":"herbi","4":"Primates"},{"1":"African elephant","2":"Loxodonta","3":"herbi","4":"Proboscidea"},{"1":"Thick-tailed opposum","2":"Lutreolina","3":"carni","4":"Didelphimorphia"},{"1":"Macaque","2":"Macaca","3":"omni","4":"Primates"},{"1":"Mongolian gerbil","2":"Meriones","3":"herbi","4":"Rodentia"},{"1":"Golden hamster","2":"Mesocricetus","3":"herbi","4":"Rodentia"},{"1":"Vole","2":"Microtus","3":"herbi","4":"Rodentia"},{"1":"House mouse","2":"Mus","3":"herbi","4":"Rodentia"},{"1":"Little brown bat","2":"Myotis","3":"insecti","4":"Chiroptera"},{"1":"Round-tailed muskrat","2":"Neofiber","3":"herbi","4":"Rodentia"},{"1":"Slow loris","2":"Nyctibeus","3":"carni","4":"Primates"},{"1":"Degu","2":"Octodon","3":"herbi","4":"Rodentia"},{"1":"Northern grasshopper mouse","2":"Onychomys","3":"carni","4":"Rodentia"},{"1":"Rabbit","2":"Oryctolagus","3":"herbi","4":"Lagomorpha"},{"1":"Sheep","2":"Ovis","3":"herbi","4":"Artiodactyla"},{"1":"Chimpanzee","2":"Pan","3":"omni","4":"Primates"},{"1":"Tiger","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Jaguar","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Lion","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Baboon","2":"Papio","3":"omni","4":"Primates"},{"1":"Desert hedgehog","2":"Paraechinus","3":"__NA__","4":"Erinaceomorpha"},{"1":"Potto","2":"Perodicticus","3":"omni","4":"Primates"},{"1":"Deer mouse","2":"Peromyscus","3":"__NA__","4":"Rodentia"},{"1":"Phalanger","2":"Phalanger","3":"__NA__","4":"Diprotodontia"},{"1":"Caspian seal","2":"Phoca","3":"carni","4":"Carnivora"},{"1":"Common porpoise","2":"Phocoena","3":"carni","4":"Cetacea"},{"1":"Potoroo","2":"Potorous","3":"herbi","4":"Diprotodontia"},{"1":"Giant armadillo","2":"Priodontes","3":"insecti","4":"Cingulata"},{"1":"Rock hyrax","2":"Procavia","3":"__NA__","4":"Hyracoidea"},{"1":"Laboratory rat","2":"Rattus","3":"herbi","4":"Rodentia"},{"1":"African striped mouse","2":"Rhabdomys","3":"omni","4":"Rodentia"},{"1":"Squirrel monkey","2":"Saimiri","3":"omni","4":"Primates"},{"1":"Eastern american mole","2":"Scalopus","3":"insecti","4":"Soricomorpha"},{"1":"Cotton rat","2":"Sigmodon","3":"herbi","4":"Rodentia"},{"1":"Mole rat","2":"Spalax","3":"__NA__","4":"Rodentia"},{"1":"Arctic ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Thirteen-lined ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Golden-mantled ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Musk shrew","2":"Suncus","3":"__NA__","4":"Soricomorpha"},{"1":"Pig","2":"Sus","3":"omni","4":"Artiodactyla"},{"1":"Short-nosed echidna","2":"Tachyglossus","3":"insecti","4":"Monotremata"},{"1":"Eastern american chipmunk","2":"Tamias","3":"herbi","4":"Rodentia"},{"1":"Brazilian tapir","2":"Tapirus","3":"herbi","4":"Perissodactyla"},{"1":"Tenrec","2":"Tenrec","3":"omni","4":"Afrosoricida"},{"1":"Tree shrew","2":"Tupaia","3":"omni","4":"Scandentia"},{"1":"Bottle-nosed dolphin","2":"Tursiops","3":"carni","4":"Cetacea"},{"1":"Genet","2":"Genetta","3":"carni","4":"Carnivora"},{"1":"Arctic fox","2":"Vulpes","3":"carni","4":"Carnivora"},{"1":"Red fox","2":"Vulpes","3":"carni","4":"Carnivora"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="mutate-if" class="section level3" number="0.2.2">
<h3 number="0.2.2"><span class="header-section-number">0.2.2</span> <strong>Mutate if</strong></h3>
<p>Not all cleaning functions can be done with <code>mutate_all()</code>. Trying to round your data will lead to an error if you have both numerical and character columns.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(round)</span></code></pre></div>
<p><code>Error in mutate_impl(.data, dots) : Evaluation error: non-numeric argument to mathematical function.</code></p>
<p>In these cases we have to add the condition that columns need to be numeric before giving <code>round()</code> instructions, which can be done with mutate_if.</p>
<p>By using <code>mutate_if()</code> we need two arguments inside a pipe:</p>
<ul>
<li><p>First it needs information about the columns you want it to consider. This information needs to be a function that returns a boolean value. The easiest cases are functions like <code>is.numeric</code>, <code>is.integer</code>, <code>is.double</code>, <code>is.logical</code>, <code>is.factor</code>, <code>lubridate::is.POSIXt</code> or <code>lubridate::is.Date</code>.</p></li>
<li><p>Secondly, it needs instructions about the mutation in the form of a function. If needed, use a tilde or <code>funs()</code> before (see above).</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, round)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["awake"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["brainwt"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["bodywt"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"12","3":"NA","4":"NA","5":"12","6":"NA","7":"50"},{"1":"Owl monkey","2":"17","3":"2","4":"NA","5":"7","6":"0","7":"0"},{"1":"Mountain beaver","2":"14","3":"2","4":"NA","5":"10","6":"NA","7":"1"},{"1":"Greater short-tailed shrew","2":"15","3":"2","4":"0","5":"9","6":"0","7":"0"},{"1":"Cow","2":"4","3":"1","4":"1","5":"20","6":"0","7":"600"},{"1":"Three-toed sloth","2":"14","3":"2","4":"1","5":"10","6":"NA","7":"4"},{"1":"Northern fur seal","2":"9","3":"1","4":"0","5":"15","6":"NA","7":"20"},{"1":"Vesper mouse","2":"7","3":"NA","4":"NA","5":"17","6":"NA","7":"0"},{"1":"Dog","2":"10","3":"3","4":"0","5":"14","6":"0","7":"14"},{"1":"Roe deer","2":"3","3":"NA","4":"NA","5":"21","6":"0","7":"15"},{"1":"Goat","2":"5","3":"1","4":"NA","5":"19","6":"0","7":"34"},{"1":"Guinea pig","2":"9","3":"1","4":"0","5":"15","6":"0","7":"1"},{"1":"Grivet","2":"10","3":"1","4":"NA","5":"14","6":"NA","7":"5"},{"1":"Chinchilla","2":"12","3":"2","4":"0","5":"12","6":"0","7":"0"},{"1":"Star-nosed mole","2":"10","3":"2","4":"NA","5":"14","6":"0","7":"0"},{"1":"African giant pouched rat","2":"8","3":"2","4":"NA","5":"16","6":"0","7":"1"},{"1":"Lesser short-tailed shrew","2":"9","3":"1","4":"0","5":"15","6":"0","7":"0"},{"1":"Long-nosed armadillo","2":"17","3":"3","4":"0","5":"7","6":"0","7":"4"},{"1":"Tree hyrax","2":"5","3":"0","4":"NA","5":"19","6":"0","7":"3"},{"1":"North American Opossum","2":"18","3":"5","4":"0","5":"6","6":"0","7":"2"},{"1":"Asian elephant","2":"4","3":"NA","4":"NA","5":"20","6":"5","7":"2547"},{"1":"Big brown bat","2":"20","3":"4","4":"0","5":"4","6":"0","7":"0"},{"1":"Horse","2":"3","3":"1","4":"1","5":"21","6":"1","7":"521"},{"1":"Donkey","2":"3","3":"0","4":"NA","5":"21","6":"0","7":"187"},{"1":"European hedgehog","2":"10","3":"4","4":"0","5":"14","6":"0","7":"1"},{"1":"Patas monkey","2":"11","3":"1","4":"NA","5":"13","6":"0","7":"10"},{"1":"Western american chipmunk","2":"15","3":"NA","4":"NA","5":"9","6":"NA","7":"0"},{"1":"Domestic cat","2":"12","3":"3","4":"0","5":"12","6":"0","7":"3"},{"1":"Galago","2":"10","3":"1","4":"1","5":"14","6":"0","7":"0"},{"1":"Giraffe","2":"2","3":"0","4":"NA","5":"22","6":"NA","7":"900"},{"1":"Pilot whale","2":"3","3":"0","4":"NA","5":"21","6":"NA","7":"800"},{"1":"Gray seal","2":"6","3":"2","4":"NA","5":"18","6":"0","7":"85"},{"1":"Gray hyrax","2":"6","3":"1","4":"NA","5":"18","6":"0","7":"3"},{"1":"Human","2":"8","3":"2","4":"2","5":"16","6":"1","7":"62"},{"1":"Mongoose lemur","2":"10","3":"1","4":"NA","5":"14","6":"NA","7":"2"},{"1":"African elephant","2":"3","3":"NA","4":"NA","5":"21","6":"6","7":"6654"},{"1":"Thick-tailed opposum","2":"19","3":"7","4":"NA","5":"5","6":"NA","7":"0"},{"1":"Macaque","2":"10","3":"1","4":"1","5":"14","6":"0","7":"7"},{"1":"Mongolian gerbil","2":"14","3":"2","4":"NA","5":"10","6":"NA","7":"0"},{"1":"Golden hamster","2":"14","3":"3","4":"0","5":"10","6":"0","7":"0"},{"1":"Vole","2":"13","3":"NA","4":"NA","5":"11","6":"NA","7":"0"},{"1":"House mouse","2":"12","3":"1","4":"0","5":"12","6":"0","7":"0"},{"1":"Little brown bat","2":"20","3":"2","4":"0","5":"4","6":"0","7":"0"},{"1":"Round-tailed muskrat","2":"15","3":"NA","4":"NA","5":"9","6":"NA","7":"0"},{"1":"Slow loris","2":"11","3":"NA","4":"NA","5":"13","6":"0","7":"1"},{"1":"Degu","2":"8","3":"1","4":"NA","5":"16","6":"NA","7":"0"},{"1":"Northern grasshopper mouse","2":"14","3":"NA","4":"NA","5":"10","6":"NA","7":"0"},{"1":"Rabbit","2":"8","3":"1","4":"0","5":"16","6":"0","7":"2"},{"1":"Sheep","2":"4","3":"1","4":"NA","5":"20","6":"0","7":"56"},{"1":"Chimpanzee","2":"10","3":"1","4":"1","5":"14","6":"0","7":"52"},{"1":"Tiger","2":"16","3":"NA","4":"NA","5":"8","6":"NA","7":"163"},{"1":"Jaguar","2":"10","3":"NA","4":"NA","5":"14","6":"0","7":"100"},{"1":"Lion","2":"14","3":"NA","4":"NA","5":"10","6":"NA","7":"161"},{"1":"Baboon","2":"9","3":"1","4":"1","5":"15","6":"0","7":"25"},{"1":"Desert hedgehog","2":"10","3":"3","4":"NA","5":"14","6":"0","7":"1"},{"1":"Potto","2":"11","3":"NA","4":"NA","5":"13","6":"NA","7":"1"},{"1":"Deer mouse","2":"12","3":"NA","4":"NA","5":"12","6":"NA","7":"0"},{"1":"Phalanger","2":"14","3":"2","4":"NA","5":"10","6":"0","7":"2"},{"1":"Caspian seal","2":"4","3":"0","4":"NA","5":"20","6":"NA","7":"86"},{"1":"Common porpoise","2":"6","3":"NA","4":"NA","5":"18","6":"NA","7":"53"},{"1":"Potoroo","2":"11","3":"2","4":"NA","5":"13","6":"NA","7":"1"},{"1":"Giant armadillo","2":"18","3":"6","4":"NA","5":"6","6":"0","7":"60"},{"1":"Rock hyrax","2":"5","3":"0","4":"NA","5":"19","6":"0","7":"4"},{"1":"Laboratory rat","2":"13","3":"2","4":"0","5":"11","6":"0","7":"0"},{"1":"African striped mouse","2":"9","3":"NA","4":"NA","5":"15","6":"NA","7":"0"},{"1":"Squirrel monkey","2":"10","3":"1","4":"NA","5":"14","6":"0","7":"1"},{"1":"Eastern american mole","2":"8","3":"2","4":"0","5":"16","6":"0","7":"0"},{"1":"Cotton rat","2":"11","3":"1","4":"0","5":"13","6":"0","7":"0"},{"1":"Mole rat","2":"11","3":"2","4":"NA","5":"13","6":"0","7":"0"},{"1":"Arctic ground squirrel","2":"17","3":"NA","4":"NA","5":"7","6":"0","7":"1"},{"1":"Thirteen-lined ground squirrel","2":"14","3":"3","4":"0","5":"10","6":"0","7":"0"},{"1":"Golden-mantled ground squirrel","2":"16","3":"3","4":"NA","5":"8","6":"NA","7":"0"},{"1":"Musk shrew","2":"13","3":"2","4":"0","5":"11","6":"0","7":"0"},{"1":"Pig","2":"9","3":"2","4":"0","5":"15","6":"0","7":"86"},{"1":"Short-nosed echidna","2":"9","3":"NA","4":"NA","5":"15","6":"0","7":"4"},{"1":"Eastern american chipmunk","2":"16","3":"NA","4":"NA","5":"8","6":"NA","7":"0"},{"1":"Brazilian tapir","2":"4","3":"1","4":"1","5":"20","6":"0","7":"208"},{"1":"Tenrec","2":"16","3":"2","4":"NA","5":"8","6":"0","7":"1"},{"1":"Tree shrew","2":"9","3":"3","4":"0","5":"15","6":"0","7":"0"},{"1":"Bottle-nosed dolphin","2":"5","3":"NA","4":"NA","5":"19","6":"NA","7":"173"},{"1":"Genet","2":"6","3":"1","4":"NA","5":"18","6":"0","7":"2"},{"1":"Arctic fox","2":"12","3":"NA","4":"NA","5":"12","6":"0","7":"3"},{"1":"Red fox","2":"10","3":"2","4":"0","5":"14","6":"0","7":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="mutate-at-to-change-specific-columns" class="section level3" number="0.2.3">
<h3 number="0.2.3"><span class="header-section-number">0.2.3</span> <strong>Mutate at to change specific columns</strong></h3>
<p>By using <code>mutate_at()</code> we need two arguments inside a pipe:</p>
<ul>
<li><p>First it needs information about the columns you want it to consider. In this case you can wrap any selection of columns (using all the options possible inside a <code>select()</code> function) and wrap it inside <code>vars()</code>.</p></li>
<li><p>Secondly, it needs instructions about the mutation in the form of a function. If needed, use a tilde or <code>funs()</code> before (see above).</p></li>
</ul>
<p>All sleep-measuring columns are in hours. If I want those in minutes, I can use <code>mutate_at()</code> and wrap all ‘sleep’ containing columns inside <code>vars()</code>. Secondly, I make a function in the fly to multiple every value by 60.<br />
The sample code shows that in this case all <code>sleep</code> columns have been changed into minutes, but <code>awake</code> did not.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>awake) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)), <span class="sc">~</span>(.<span class="sc">*</span><span class="dv">60</span>)) </span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["awake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"726","3":"NA","4":"NA","5":"11.90"},{"1":"Owl monkey","2":"1020","3":"108","4":"NA","5":"7.00"},{"1":"Mountain beaver","2":"864","3":"144","4":"NA","5":"9.60"},{"1":"Greater short-tailed shrew","2":"894","3":"138","4":"8","5":"9.10"},{"1":"Cow","2":"240","3":"42","4":"40","5":"20.00"},{"1":"Three-toed sloth","2":"864","3":"132","4":"46","5":"9.60"},{"1":"Northern fur seal","2":"522","3":"84","4":"23","5":"15.30"},{"1":"Vesper mouse","2":"420","3":"NA","4":"NA","5":"17.00"},{"1":"Dog","2":"606","3":"174","4":"20","5":"13.90"},{"1":"Roe deer","2":"180","3":"NA","4":"NA","5":"21.00"},{"1":"Goat","2":"318","3":"36","4":"NA","5":"18.70"},{"1":"Guinea pig","2":"564","3":"48","4":"13","5":"14.60"},{"1":"Grivet","2":"600","3":"42","4":"NA","5":"14.00"},{"1":"Chinchilla","2":"750","3":"90","4":"7","5":"11.50"},{"1":"Star-nosed mole","2":"618","3":"132","4":"NA","5":"13.70"},{"1":"African giant pouched rat","2":"498","3":"120","4":"NA","5":"15.70"},{"1":"Lesser short-tailed shrew","2":"546","3":"84","4":"9","5":"14.90"},{"1":"Long-nosed armadillo","2":"1044","3":"186","4":"23","5":"6.60"},{"1":"Tree hyrax","2":"318","3":"30","4":"NA","5":"18.70"},{"1":"North American Opossum","2":"1080","3":"294","4":"20","5":"6.00"},{"1":"Asian elephant","2":"234","3":"NA","4":"NA","5":"20.10"},{"1":"Big brown bat","2":"1182","3":"234","4":"7","5":"4.30"},{"1":"Horse","2":"174","3":"36","4":"60","5":"21.10"},{"1":"Donkey","2":"186","3":"24","4":"NA","5":"20.90"},{"1":"European hedgehog","2":"606","3":"210","4":"17","5":"13.90"},{"1":"Patas monkey","2":"654","3":"66","4":"NA","5":"13.10"},{"1":"Western american chipmunk","2":"894","3":"NA","4":"NA","5":"9.10"},{"1":"Domestic cat","2":"750","3":"192","4":"25","5":"11.50"},{"1":"Galago","2":"588","3":"66","4":"33","5":"14.20"},{"1":"Giraffe","2":"114","3":"24","4":"NA","5":"22.10"},{"1":"Pilot whale","2":"162","3":"6","4":"NA","5":"21.35"},{"1":"Gray seal","2":"372","3":"90","4":"NA","5":"17.80"},{"1":"Gray hyrax","2":"378","3":"36","4":"NA","5":"17.70"},{"1":"Human","2":"480","3":"114","4":"90","5":"16.00"},{"1":"Mongoose lemur","2":"570","3":"54","4":"NA","5":"14.50"},{"1":"African elephant","2":"198","3":"NA","4":"NA","5":"20.70"},{"1":"Thick-tailed opposum","2":"1164","3":"396","4":"NA","5":"4.60"},{"1":"Macaque","2":"606","3":"72","4":"45","5":"13.90"},{"1":"Mongolian gerbil","2":"852","3":"114","4":"NA","5":"9.80"},{"1":"Golden hamster","2":"858","3":"186","4":"12","5":"9.70"},{"1":"Vole","2":"768","3":"NA","4":"NA","5":"11.20"},{"1":"House mouse","2":"750","3":"84","4":"11","5":"11.50"},{"1":"Little brown bat","2":"1194","3":"120","4":"12","5":"4.10"},{"1":"Round-tailed muskrat","2":"876","3":"NA","4":"NA","5":"9.40"},{"1":"Slow loris","2":"660","3":"NA","4":"NA","5":"13.00"},{"1":"Degu","2":"462","3":"54","4":"NA","5":"16.30"},{"1":"Northern grasshopper mouse","2":"870","3":"NA","4":"NA","5":"9.50"},{"1":"Rabbit","2":"504","3":"54","4":"25","5":"15.60"},{"1":"Sheep","2":"228","3":"36","4":"NA","5":"20.20"},{"1":"Chimpanzee","2":"582","3":"84","4":"85","5":"14.30"},{"1":"Tiger","2":"948","3":"NA","4":"NA","5":"8.20"},{"1":"Jaguar","2":"624","3":"NA","4":"NA","5":"13.60"},{"1":"Lion","2":"810","3":"NA","4":"NA","5":"10.50"},{"1":"Baboon","2":"564","3":"60","4":"40","5":"14.60"},{"1":"Desert hedgehog","2":"618","3":"162","4":"NA","5":"13.70"},{"1":"Potto","2":"660","3":"NA","4":"NA","5":"13.00"},{"1":"Deer mouse","2":"690","3":"NA","4":"NA","5":"12.50"},{"1":"Phalanger","2":"822","3":"108","4":"NA","5":"10.30"},{"1":"Caspian seal","2":"210","3":"24","4":"NA","5":"20.50"},{"1":"Common porpoise","2":"336","3":"NA","4":"NA","5":"18.45"},{"1":"Potoroo","2":"666","3":"90","4":"NA","5":"12.90"},{"1":"Giant armadillo","2":"1086","3":"366","4":"NA","5":"5.90"},{"1":"Rock hyrax","2":"324","3":"30","4":"NA","5":"18.60"},{"1":"Laboratory rat","2":"780","3":"144","4":"11","5":"11.00"},{"1":"African striped mouse","2":"522","3":"NA","4":"NA","5":"15.30"},{"1":"Squirrel monkey","2":"576","3":"84","4":"NA","5":"14.40"},{"1":"Eastern american mole","2":"504","3":"126","4":"10","5":"15.60"},{"1":"Cotton rat","2":"678","3":"66","4":"9","5":"12.70"},{"1":"Mole rat","2":"636","3":"144","4":"NA","5":"13.40"},{"1":"Arctic ground squirrel","2":"996","3":"NA","4":"NA","5":"7.40"},{"1":"Thirteen-lined ground squirrel","2":"828","3":"204","4":"13","5":"10.20"},{"1":"Golden-mantled ground squirrel","2":"954","3":"180","4":"NA","5":"8.10"},{"1":"Musk shrew","2":"768","3":"120","4":"11","5":"11.20"},{"1":"Pig","2":"546","3":"144","4":"30","5":"14.90"},{"1":"Short-nosed echidna","2":"516","3":"NA","4":"NA","5":"15.40"},{"1":"Eastern american chipmunk","2":"948","3":"NA","4":"NA","5":"8.20"},{"1":"Brazilian tapir","2":"264","3":"60","4":"54","5":"19.60"},{"1":"Tenrec","2":"936","3":"138","4":"NA","5":"8.40"},{"1":"Tree shrew","2":"534","3":"156","4":"14","5":"15.10"},{"1":"Bottle-nosed dolphin","2":"312","3":"NA","4":"NA","5":"18.80"},{"1":"Genet","2":"378","3":"78","4":"NA","5":"17.70"},{"1":"Arctic fox","2":"750","3":"NA","4":"NA","5":"11.50"},{"1":"Red fox","2":"588","3":"144","4":"21","5":"14.20"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="changing-column-names-after-mutation" class="section level3" number="0.2.4">
<h3 number="0.2.4"><span class="header-section-number">0.2.4</span> <strong>Changing column names after mutation</strong></h3>
<p>With a singular <code>mutate()</code> statement, you immediately have the option to change the columns name. In the above example for instance it is confusing that the sleep columns are in a different unit, you can change that by calling a rename function:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>awake) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)), <span class="sc">~</span>(.<span class="sc">*</span><span class="dv">60</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)), <span class="sc">~</span><span class="fu">paste0</span>(.,<span class="st">&quot;_min&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total_min"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem_min"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle_min"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["awake"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"726","3":"NA","4":"NA","5":"11.90"},{"1":"Owl monkey","2":"1020","3":"108","4":"NA","5":"7.00"},{"1":"Mountain beaver","2":"864","3":"144","4":"NA","5":"9.60"},{"1":"Greater short-tailed shrew","2":"894","3":"138","4":"8","5":"9.10"},{"1":"Cow","2":"240","3":"42","4":"40","5":"20.00"},{"1":"Three-toed sloth","2":"864","3":"132","4":"46","5":"9.60"},{"1":"Northern fur seal","2":"522","3":"84","4":"23","5":"15.30"},{"1":"Vesper mouse","2":"420","3":"NA","4":"NA","5":"17.00"},{"1":"Dog","2":"606","3":"174","4":"20","5":"13.90"},{"1":"Roe deer","2":"180","3":"NA","4":"NA","5":"21.00"},{"1":"Goat","2":"318","3":"36","4":"NA","5":"18.70"},{"1":"Guinea pig","2":"564","3":"48","4":"13","5":"14.60"},{"1":"Grivet","2":"600","3":"42","4":"NA","5":"14.00"},{"1":"Chinchilla","2":"750","3":"90","4":"7","5":"11.50"},{"1":"Star-nosed mole","2":"618","3":"132","4":"NA","5":"13.70"},{"1":"African giant pouched rat","2":"498","3":"120","4":"NA","5":"15.70"},{"1":"Lesser short-tailed shrew","2":"546","3":"84","4":"9","5":"14.90"},{"1":"Long-nosed armadillo","2":"1044","3":"186","4":"23","5":"6.60"},{"1":"Tree hyrax","2":"318","3":"30","4":"NA","5":"18.70"},{"1":"North American Opossum","2":"1080","3":"294","4":"20","5":"6.00"},{"1":"Asian elephant","2":"234","3":"NA","4":"NA","5":"20.10"},{"1":"Big brown bat","2":"1182","3":"234","4":"7","5":"4.30"},{"1":"Horse","2":"174","3":"36","4":"60","5":"21.10"},{"1":"Donkey","2":"186","3":"24","4":"NA","5":"20.90"},{"1":"European hedgehog","2":"606","3":"210","4":"17","5":"13.90"},{"1":"Patas monkey","2":"654","3":"66","4":"NA","5":"13.10"},{"1":"Western american chipmunk","2":"894","3":"NA","4":"NA","5":"9.10"},{"1":"Domestic cat","2":"750","3":"192","4":"25","5":"11.50"},{"1":"Galago","2":"588","3":"66","4":"33","5":"14.20"},{"1":"Giraffe","2":"114","3":"24","4":"NA","5":"22.10"},{"1":"Pilot whale","2":"162","3":"6","4":"NA","5":"21.35"},{"1":"Gray seal","2":"372","3":"90","4":"NA","5":"17.80"},{"1":"Gray hyrax","2":"378","3":"36","4":"NA","5":"17.70"},{"1":"Human","2":"480","3":"114","4":"90","5":"16.00"},{"1":"Mongoose lemur","2":"570","3":"54","4":"NA","5":"14.50"},{"1":"African elephant","2":"198","3":"NA","4":"NA","5":"20.70"},{"1":"Thick-tailed opposum","2":"1164","3":"396","4":"NA","5":"4.60"},{"1":"Macaque","2":"606","3":"72","4":"45","5":"13.90"},{"1":"Mongolian gerbil","2":"852","3":"114","4":"NA","5":"9.80"},{"1":"Golden hamster","2":"858","3":"186","4":"12","5":"9.70"},{"1":"Vole","2":"768","3":"NA","4":"NA","5":"11.20"},{"1":"House mouse","2":"750","3":"84","4":"11","5":"11.50"},{"1":"Little brown bat","2":"1194","3":"120","4":"12","5":"4.10"},{"1":"Round-tailed muskrat","2":"876","3":"NA","4":"NA","5":"9.40"},{"1":"Slow loris","2":"660","3":"NA","4":"NA","5":"13.00"},{"1":"Degu","2":"462","3":"54","4":"NA","5":"16.30"},{"1":"Northern grasshopper mouse","2":"870","3":"NA","4":"NA","5":"9.50"},{"1":"Rabbit","2":"504","3":"54","4":"25","5":"15.60"},{"1":"Sheep","2":"228","3":"36","4":"NA","5":"20.20"},{"1":"Chimpanzee","2":"582","3":"84","4":"85","5":"14.30"},{"1":"Tiger","2":"948","3":"NA","4":"NA","5":"8.20"},{"1":"Jaguar","2":"624","3":"NA","4":"NA","5":"13.60"},{"1":"Lion","2":"810","3":"NA","4":"NA","5":"10.50"},{"1":"Baboon","2":"564","3":"60","4":"40","5":"14.60"},{"1":"Desert hedgehog","2":"618","3":"162","4":"NA","5":"13.70"},{"1":"Potto","2":"660","3":"NA","4":"NA","5":"13.00"},{"1":"Deer mouse","2":"690","3":"NA","4":"NA","5":"12.50"},{"1":"Phalanger","2":"822","3":"108","4":"NA","5":"10.30"},{"1":"Caspian seal","2":"210","3":"24","4":"NA","5":"20.50"},{"1":"Common porpoise","2":"336","3":"NA","4":"NA","5":"18.45"},{"1":"Potoroo","2":"666","3":"90","4":"NA","5":"12.90"},{"1":"Giant armadillo","2":"1086","3":"366","4":"NA","5":"5.90"},{"1":"Rock hyrax","2":"324","3":"30","4":"NA","5":"18.60"},{"1":"Laboratory rat","2":"780","3":"144","4":"11","5":"11.00"},{"1":"African striped mouse","2":"522","3":"NA","4":"NA","5":"15.30"},{"1":"Squirrel monkey","2":"576","3":"84","4":"NA","5":"14.40"},{"1":"Eastern american mole","2":"504","3":"126","4":"10","5":"15.60"},{"1":"Cotton rat","2":"678","3":"66","4":"9","5":"12.70"},{"1":"Mole rat","2":"636","3":"144","4":"NA","5":"13.40"},{"1":"Arctic ground squirrel","2":"996","3":"NA","4":"NA","5":"7.40"},{"1":"Thirteen-lined ground squirrel","2":"828","3":"204","4":"13","5":"10.20"},{"1":"Golden-mantled ground squirrel","2":"954","3":"180","4":"NA","5":"8.10"},{"1":"Musk shrew","2":"768","3":"120","4":"11","5":"11.20"},{"1":"Pig","2":"546","3":"144","4":"30","5":"14.90"},{"1":"Short-nosed echidna","2":"516","3":"NA","4":"NA","5":"15.40"},{"1":"Eastern american chipmunk","2":"948","3":"NA","4":"NA","5":"8.20"},{"1":"Brazilian tapir","2":"264","3":"60","4":"54","5":"19.60"},{"1":"Tenrec","2":"936","3":"138","4":"NA","5":"8.40"},{"1":"Tree shrew","2":"534","3":"156","4":"14","5":"15.10"},{"1":"Bottle-nosed dolphin","2":"312","3":"NA","4":"NA","5":"18.80"},{"1":"Genet","2":"378","3":"78","4":"NA","5":"17.70"},{"1":"Arctic fox","2":"750","3":"NA","4":"NA","5":"11.50"},{"1":"Red fox","2":"588","3":"144","4":"21","5":"14.20"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Or as <a href="https://twitter.com/TomasMcManus1/status/981187099649912832">Tomas McManus</a> pointed out: you can assign a “tag” inside <code>funs()</code> which will be appended to the current name. The main difference between both options: the <code>funs()</code> version is one line of code less, but columns will be added rather than replaced. Depending on your scenario, either could be useful.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>awake) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)), <span class="fu">funs</span>(<span class="at">min =</span> .<span class="sc">*</span><span class="dv">60</span>))</span></code></pre></div>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## Please use a list of either functions or lambdas: 
## 
##   # Simple named list: 
##   list(mean = mean, median = median)
## 
##   # Auto named with `tibble::lst()`: 
##   tibble::lst(mean, median)
## 
##   # Using lambdas
##   list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["awake"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["sleep_total_min"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["sleep_rem_min"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle_min"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"12.1","3":"NA","4":"NA","5":"11.90","6":"726","7":"NA","8":"NA"},{"1":"Owl monkey","2":"17.0","3":"1.8","4":"NA","5":"7.00","6":"1020","7":"108","8":"NA"},{"1":"Mountain beaver","2":"14.4","3":"2.4","4":"NA","5":"9.60","6":"864","7":"144","8":"NA"},{"1":"Greater short-tailed shrew","2":"14.9","3":"2.3","4":"0.1333333","5":"9.10","6":"894","7":"138","8":"8"},{"1":"Cow","2":"4.0","3":"0.7","4":"0.6666667","5":"20.00","6":"240","7":"42","8":"40"},{"1":"Three-toed sloth","2":"14.4","3":"2.2","4":"0.7666667","5":"9.60","6":"864","7":"132","8":"46"},{"1":"Northern fur seal","2":"8.7","3":"1.4","4":"0.3833333","5":"15.30","6":"522","7":"84","8":"23"},{"1":"Vesper mouse","2":"7.0","3":"NA","4":"NA","5":"17.00","6":"420","7":"NA","8":"NA"},{"1":"Dog","2":"10.1","3":"2.9","4":"0.3333333","5":"13.90","6":"606","7":"174","8":"20"},{"1":"Roe deer","2":"3.0","3":"NA","4":"NA","5":"21.00","6":"180","7":"NA","8":"NA"},{"1":"Goat","2":"5.3","3":"0.6","4":"NA","5":"18.70","6":"318","7":"36","8":"NA"},{"1":"Guinea pig","2":"9.4","3":"0.8","4":"0.2166667","5":"14.60","6":"564","7":"48","8":"13"},{"1":"Grivet","2":"10.0","3":"0.7","4":"NA","5":"14.00","6":"600","7":"42","8":"NA"},{"1":"Chinchilla","2":"12.5","3":"1.5","4":"0.1166667","5":"11.50","6":"750","7":"90","8":"7"},{"1":"Star-nosed mole","2":"10.3","3":"2.2","4":"NA","5":"13.70","6":"618","7":"132","8":"NA"},{"1":"African giant pouched rat","2":"8.3","3":"2.0","4":"NA","5":"15.70","6":"498","7":"120","8":"NA"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"1.4","4":"0.1500000","5":"14.90","6":"546","7":"84","8":"9"},{"1":"Long-nosed armadillo","2":"17.4","3":"3.1","4":"0.3833333","5":"6.60","6":"1044","7":"186","8":"23"},{"1":"Tree hyrax","2":"5.3","3":"0.5","4":"NA","5":"18.70","6":"318","7":"30","8":"NA"},{"1":"North American Opossum","2":"18.0","3":"4.9","4":"0.3333333","5":"6.00","6":"1080","7":"294","8":"20"},{"1":"Asian elephant","2":"3.9","3":"NA","4":"NA","5":"20.10","6":"234","7":"NA","8":"NA"},{"1":"Big brown bat","2":"19.7","3":"3.9","4":"0.1166667","5":"4.30","6":"1182","7":"234","8":"7"},{"1":"Horse","2":"2.9","3":"0.6","4":"1.0000000","5":"21.10","6":"174","7":"36","8":"60"},{"1":"Donkey","2":"3.1","3":"0.4","4":"NA","5":"20.90","6":"186","7":"24","8":"NA"},{"1":"European hedgehog","2":"10.1","3":"3.5","4":"0.2833333","5":"13.90","6":"606","7":"210","8":"17"},{"1":"Patas monkey","2":"10.9","3":"1.1","4":"NA","5":"13.10","6":"654","7":"66","8":"NA"},{"1":"Western american chipmunk","2":"14.9","3":"NA","4":"NA","5":"9.10","6":"894","7":"NA","8":"NA"},{"1":"Domestic cat","2":"12.5","3":"3.2","4":"0.4166667","5":"11.50","6":"750","7":"192","8":"25"},{"1":"Galago","2":"9.8","3":"1.1","4":"0.5500000","5":"14.20","6":"588","7":"66","8":"33"},{"1":"Giraffe","2":"1.9","3":"0.4","4":"NA","5":"22.10","6":"114","7":"24","8":"NA"},{"1":"Pilot whale","2":"2.7","3":"0.1","4":"NA","5":"21.35","6":"162","7":"6","8":"NA"},{"1":"Gray seal","2":"6.2","3":"1.5","4":"NA","5":"17.80","6":"372","7":"90","8":"NA"},{"1":"Gray hyrax","2":"6.3","3":"0.6","4":"NA","5":"17.70","6":"378","7":"36","8":"NA"},{"1":"Human","2":"8.0","3":"1.9","4":"1.5000000","5":"16.00","6":"480","7":"114","8":"90"},{"1":"Mongoose lemur","2":"9.5","3":"0.9","4":"NA","5":"14.50","6":"570","7":"54","8":"NA"},{"1":"African elephant","2":"3.3","3":"NA","4":"NA","5":"20.70","6":"198","7":"NA","8":"NA"},{"1":"Thick-tailed opposum","2":"19.4","3":"6.6","4":"NA","5":"4.60","6":"1164","7":"396","8":"NA"},{"1":"Macaque","2":"10.1","3":"1.2","4":"0.7500000","5":"13.90","6":"606","7":"72","8":"45"},{"1":"Mongolian gerbil","2":"14.2","3":"1.9","4":"NA","5":"9.80","6":"852","7":"114","8":"NA"},{"1":"Golden hamster","2":"14.3","3":"3.1","4":"0.2000000","5":"9.70","6":"858","7":"186","8":"12"},{"1":"Vole","2":"12.8","3":"NA","4":"NA","5":"11.20","6":"768","7":"NA","8":"NA"},{"1":"House mouse","2":"12.5","3":"1.4","4":"0.1833333","5":"11.50","6":"750","7":"84","8":"11"},{"1":"Little brown bat","2":"19.9","3":"2.0","4":"0.2000000","5":"4.10","6":"1194","7":"120","8":"12"},{"1":"Round-tailed muskrat","2":"14.6","3":"NA","4":"NA","5":"9.40","6":"876","7":"NA","8":"NA"},{"1":"Slow loris","2":"11.0","3":"NA","4":"NA","5":"13.00","6":"660","7":"NA","8":"NA"},{"1":"Degu","2":"7.7","3":"0.9","4":"NA","5":"16.30","6":"462","7":"54","8":"NA"},{"1":"Northern grasshopper mouse","2":"14.5","3":"NA","4":"NA","5":"9.50","6":"870","7":"NA","8":"NA"},{"1":"Rabbit","2":"8.4","3":"0.9","4":"0.4166667","5":"15.60","6":"504","7":"54","8":"25"},{"1":"Sheep","2":"3.8","3":"0.6","4":"NA","5":"20.20","6":"228","7":"36","8":"NA"},{"1":"Chimpanzee","2":"9.7","3":"1.4","4":"1.4166667","5":"14.30","6":"582","7":"84","8":"85"},{"1":"Tiger","2":"15.8","3":"NA","4":"NA","5":"8.20","6":"948","7":"NA","8":"NA"},{"1":"Jaguar","2":"10.4","3":"NA","4":"NA","5":"13.60","6":"624","7":"NA","8":"NA"},{"1":"Lion","2":"13.5","3":"NA","4":"NA","5":"10.50","6":"810","7":"NA","8":"NA"},{"1":"Baboon","2":"9.4","3":"1.0","4":"0.6666667","5":"14.60","6":"564","7":"60","8":"40"},{"1":"Desert hedgehog","2":"10.3","3":"2.7","4":"NA","5":"13.70","6":"618","7":"162","8":"NA"},{"1":"Potto","2":"11.0","3":"NA","4":"NA","5":"13.00","6":"660","7":"NA","8":"NA"},{"1":"Deer mouse","2":"11.5","3":"NA","4":"NA","5":"12.50","6":"690","7":"NA","8":"NA"},{"1":"Phalanger","2":"13.7","3":"1.8","4":"NA","5":"10.30","6":"822","7":"108","8":"NA"},{"1":"Caspian seal","2":"3.5","3":"0.4","4":"NA","5":"20.50","6":"210","7":"24","8":"NA"},{"1":"Common porpoise","2":"5.6","3":"NA","4":"NA","5":"18.45","6":"336","7":"NA","8":"NA"},{"1":"Potoroo","2":"11.1","3":"1.5","4":"NA","5":"12.90","6":"666","7":"90","8":"NA"},{"1":"Giant armadillo","2":"18.1","3":"6.1","4":"NA","5":"5.90","6":"1086","7":"366","8":"NA"},{"1":"Rock hyrax","2":"5.4","3":"0.5","4":"NA","5":"18.60","6":"324","7":"30","8":"NA"},{"1":"Laboratory rat","2":"13.0","3":"2.4","4":"0.1833333","5":"11.00","6":"780","7":"144","8":"11"},{"1":"African striped mouse","2":"8.7","3":"NA","4":"NA","5":"15.30","6":"522","7":"NA","8":"NA"},{"1":"Squirrel monkey","2":"9.6","3":"1.4","4":"NA","5":"14.40","6":"576","7":"84","8":"NA"},{"1":"Eastern american mole","2":"8.4","3":"2.1","4":"0.1666667","5":"15.60","6":"504","7":"126","8":"10"},{"1":"Cotton rat","2":"11.3","3":"1.1","4":"0.1500000","5":"12.70","6":"678","7":"66","8":"9"},{"1":"Mole rat","2":"10.6","3":"2.4","4":"NA","5":"13.40","6":"636","7":"144","8":"NA"},{"1":"Arctic ground squirrel","2":"16.6","3":"NA","4":"NA","5":"7.40","6":"996","7":"NA","8":"NA"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"3.4","4":"0.2166667","5":"10.20","6":"828","7":"204","8":"13"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"3.0","4":"NA","5":"8.10","6":"954","7":"180","8":"NA"},{"1":"Musk shrew","2":"12.8","3":"2.0","4":"0.1833333","5":"11.20","6":"768","7":"120","8":"11"},{"1":"Pig","2":"9.1","3":"2.4","4":"0.5000000","5":"14.90","6":"546","7":"144","8":"30"},{"1":"Short-nosed echidna","2":"8.6","3":"NA","4":"NA","5":"15.40","6":"516","7":"NA","8":"NA"},{"1":"Eastern american chipmunk","2":"15.8","3":"NA","4":"NA","5":"8.20","6":"948","7":"NA","8":"NA"},{"1":"Brazilian tapir","2":"4.4","3":"1.0","4":"0.9000000","5":"19.60","6":"264","7":"60","8":"54"},{"1":"Tenrec","2":"15.6","3":"2.3","4":"NA","5":"8.40","6":"936","7":"138","8":"NA"},{"1":"Tree shrew","2":"8.9","3":"2.6","4":"0.2333333","5":"15.10","6":"534","7":"156","8":"14"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"NA","4":"NA","5":"18.80","6":"312","7":"NA","8":"NA"},{"1":"Genet","2":"6.3","3":"1.3","4":"NA","5":"17.70","6":"378","7":"78","8":"NA"},{"1":"Arctic fox","2":"12.5","3":"NA","4":"NA","5":"11.50","6":"750","7":"NA","8":"NA"},{"1":"Red fox","2":"9.8","3":"2.4","4":"0.3500000","5":"14.20","6":"588","7":"144","8":"21"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<br>
<hr>
</div>
</div>
<div id="working-with-discrete-columns" class="section level2" number="0.3">
<h2 number="0.3"><span class="header-section-number">0.3</span> <strong>Working with discrete columns</strong></h2>
<div id="recoding-discrete-columns" class="section level3" number="0.3.1">
<h3 number="0.3.1"><span class="header-section-number">0.3.1</span> <strong>Recoding discrete columns</strong></h3>
<p>To rename or reorganize current discrete columns, you can use <code>recode()</code> inside a <code>mutate()</code> statement: this enables you to change the current naming, or to group current levels into less levels. The <code>.default</code> refers to anything that isn’t covered by the before groups with the exception of NA. You can change NA into something other than NA by adding a <code>.missing</code> argument if you want (see next sample code).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">conservation2 =</span> <span class="fu">recode</span>(conservation,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;en&quot;</span> <span class="ot">=</span> <span class="st">&quot;Endangered&quot;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;lc&quot;</span> <span class="ot">=</span> <span class="st">&quot;Least_Concern&quot;</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;domesticated&quot;</span> <span class="ot">=</span> <span class="st">&quot;Least_Concern&quot;</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">.default =</span> <span class="st">&quot;other&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(conservation2)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["conservation2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Endangered","2":"4"},{"1":"Least_Concern","2":"37"},{"1":"other","2":"13"},{"1":"NA","2":"29"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>A special version exists to return a factor: <code>recode_factor()</code>. By default the <code>.ordered</code> argument is <code>FALSE</code>. To return an ordered factor set the argument to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">conservation2 =</span> <span class="fu">recode_factor</span>(conservation,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;en&quot;</span> <span class="ot">=</span> <span class="st">&quot;Endangered&quot;</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;lc&quot;</span> <span class="ot">=</span> <span class="st">&quot;Least_Concern&quot;</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;domesticated&quot;</span> <span class="ot">=</span> <span class="st">&quot;Least_Concern&quot;</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">.default =</span> <span class="st">&quot;other&quot;</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">.missing =</span> <span class="st">&quot;no data&quot;</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">.ordered =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(conservation2)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["conservation2"],"name":[1],"type":["ord"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Endangered","2":"4"},{"1":"Least_Concern","2":"37"},{"1":"other","2":"13"},{"1":"no data","2":"29"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br></p>
</div>
<div id="creating-new-discrete-column-two-levels" class="section level3" number="0.3.2">
<h3 number="0.3.2"><span class="header-section-number">0.3.2</span> <strong>Creating new discrete column (two levels)</strong></h3>
<p>The <code>ifelse()</code> statement can be used to turn a numeric column into a discrete one. As mentioned above, <code>ifelse()</code> takes a logical expression, then what to do if the expression returns <code>TRUE</code> and lastly what to do when it returns <code>FALSE</code>.<br />
The sample code will divide the current measure <code>sleep_total</code> into a discrete “long” or “short” sleeper.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sleep_time =</span> <span class="fu">ifelse</span>(sleep_total <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="st">&quot;long&quot;</span>, <span class="st">&quot;short&quot;</span>)) </span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_time"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah","2":"12.1","3":"long"},{"1":"Owl monkey","2":"17.0","3":"long"},{"1":"Mountain beaver","2":"14.4","3":"long"},{"1":"Greater short-tailed shrew","2":"14.9","3":"long"},{"1":"Cow","2":"4.0","3":"short"},{"1":"Three-toed sloth","2":"14.4","3":"long"},{"1":"Northern fur seal","2":"8.7","3":"short"},{"1":"Vesper mouse","2":"7.0","3":"short"},{"1":"Dog","2":"10.1","3":"long"},{"1":"Roe deer","2":"3.0","3":"short"},{"1":"Goat","2":"5.3","3":"short"},{"1":"Guinea pig","2":"9.4","3":"short"},{"1":"Grivet","2":"10.0","3":"short"},{"1":"Chinchilla","2":"12.5","3":"long"},{"1":"Star-nosed mole","2":"10.3","3":"long"},{"1":"African giant pouched rat","2":"8.3","3":"short"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"short"},{"1":"Long-nosed armadillo","2":"17.4","3":"long"},{"1":"Tree hyrax","2":"5.3","3":"short"},{"1":"North American Opossum","2":"18.0","3":"long"},{"1":"Asian elephant","2":"3.9","3":"short"},{"1":"Big brown bat","2":"19.7","3":"long"},{"1":"Horse","2":"2.9","3":"short"},{"1":"Donkey","2":"3.1","3":"short"},{"1":"European hedgehog","2":"10.1","3":"long"},{"1":"Patas monkey","2":"10.9","3":"long"},{"1":"Western american chipmunk","2":"14.9","3":"long"},{"1":"Domestic cat","2":"12.5","3":"long"},{"1":"Galago","2":"9.8","3":"short"},{"1":"Giraffe","2":"1.9","3":"short"},{"1":"Pilot whale","2":"2.7","3":"short"},{"1":"Gray seal","2":"6.2","3":"short"},{"1":"Gray hyrax","2":"6.3","3":"short"},{"1":"Human","2":"8.0","3":"short"},{"1":"Mongoose lemur","2":"9.5","3":"short"},{"1":"African elephant","2":"3.3","3":"short"},{"1":"Thick-tailed opposum","2":"19.4","3":"long"},{"1":"Macaque","2":"10.1","3":"long"},{"1":"Mongolian gerbil","2":"14.2","3":"long"},{"1":"Golden hamster","2":"14.3","3":"long"},{"1":"Vole","2":"12.8","3":"long"},{"1":"House mouse","2":"12.5","3":"long"},{"1":"Little brown bat","2":"19.9","3":"long"},{"1":"Round-tailed muskrat","2":"14.6","3":"long"},{"1":"Slow loris","2":"11.0","3":"long"},{"1":"Degu","2":"7.7","3":"short"},{"1":"Northern grasshopper mouse","2":"14.5","3":"long"},{"1":"Rabbit","2":"8.4","3":"short"},{"1":"Sheep","2":"3.8","3":"short"},{"1":"Chimpanzee","2":"9.7","3":"short"},{"1":"Tiger","2":"15.8","3":"long"},{"1":"Jaguar","2":"10.4","3":"long"},{"1":"Lion","2":"13.5","3":"long"},{"1":"Baboon","2":"9.4","3":"short"},{"1":"Desert hedgehog","2":"10.3","3":"long"},{"1":"Potto","2":"11.0","3":"long"},{"1":"Deer mouse","2":"11.5","3":"long"},{"1":"Phalanger","2":"13.7","3":"long"},{"1":"Caspian seal","2":"3.5","3":"short"},{"1":"Common porpoise","2":"5.6","3":"short"},{"1":"Potoroo","2":"11.1","3":"long"},{"1":"Giant armadillo","2":"18.1","3":"long"},{"1":"Rock hyrax","2":"5.4","3":"short"},{"1":"Laboratory rat","2":"13.0","3":"long"},{"1":"African striped mouse","2":"8.7","3":"short"},{"1":"Squirrel monkey","2":"9.6","3":"short"},{"1":"Eastern american mole","2":"8.4","3":"short"},{"1":"Cotton rat","2":"11.3","3":"long"},{"1":"Mole rat","2":"10.6","3":"long"},{"1":"Arctic ground squirrel","2":"16.6","3":"long"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"long"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"long"},{"1":"Musk shrew","2":"12.8","3":"long"},{"1":"Pig","2":"9.1","3":"short"},{"1":"Short-nosed echidna","2":"8.6","3":"short"},{"1":"Eastern american chipmunk","2":"15.8","3":"long"},{"1":"Brazilian tapir","2":"4.4","3":"short"},{"1":"Tenrec","2":"15.6","3":"long"},{"1":"Tree shrew","2":"8.9","3":"short"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"short"},{"1":"Genet","2":"6.3","3":"short"},{"1":"Arctic fox","2":"12.5","3":"long"},{"1":"Red fox","2":"9.8","3":"short"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br></p>
</div>
<div id="creating-new-discrete-column-multiple-levels" class="section level3" number="0.3.3">
<h3 number="0.3.3"><span class="header-section-number">0.3.3</span> <strong>Creating new discrete column (multiple levels)</strong></h3>
<p>The <code>ifelse()</code> can be nested but if you want more than two levels, but it might be even easier to use <code>case_when()</code> which allows as many statements as you like and is easier to read than many nested <code>ifelse</code> statements.<br />
The arguments are evaluated in order, so only the rows where the first statement is not true will continue to be evaluated for the next statement. For everything that is left at the end just use the <code>TRUE ~ "newname"</code>.<br />
Unfortunately there seems to be no easy way to get <code>case_when()</code> to return an ordered factor, so you will need to to do that yourself afterwards, either by using <code>forcats::fct_relevel()</code>, or just with a <code>factor()</code> function. If you have a lot of levels I would advice to make a levels vector upfront to avoid cluttering the piple too much.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sleep_total_discr =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    sleep_total <span class="sc">&gt;</span> <span class="dv">13</span> <span class="sc">~</span> <span class="st">&quot;very long&quot;</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    sleep_total <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;long&quot;</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    sleep_total <span class="sc">&gt;</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">&quot;limited&quot;</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;short&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sleep_total_discr =</span> <span class="fu">factor</span>(sleep_total_discr, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;short&quot;</span>, <span class="st">&quot;limited&quot;</span>, </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">&quot;long&quot;</span>, <span class="st">&quot;very long&quot;</span>)))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_total_discr"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"Cheetah","2":"12.1","3":"long"},{"1":"Owl monkey","2":"17.0","3":"very long"},{"1":"Mountain beaver","2":"14.4","3":"very long"},{"1":"Greater short-tailed shrew","2":"14.9","3":"very long"},{"1":"Cow","2":"4.0","3":"short"},{"1":"Three-toed sloth","2":"14.4","3":"very long"},{"1":"Northern fur seal","2":"8.7","3":"limited"},{"1":"Vesper mouse","2":"7.0","3":"short"},{"1":"Dog","2":"10.1","3":"long"},{"1":"Roe deer","2":"3.0","3":"short"},{"1":"Goat","2":"5.3","3":"short"},{"1":"Guinea pig","2":"9.4","3":"limited"},{"1":"Grivet","2":"10.0","3":"limited"},{"1":"Chinchilla","2":"12.5","3":"long"},{"1":"Star-nosed mole","2":"10.3","3":"long"},{"1":"African giant pouched rat","2":"8.3","3":"limited"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"limited"},{"1":"Long-nosed armadillo","2":"17.4","3":"very long"},{"1":"Tree hyrax","2":"5.3","3":"short"},{"1":"North American Opossum","2":"18.0","3":"very long"},{"1":"Asian elephant","2":"3.9","3":"short"},{"1":"Big brown bat","2":"19.7","3":"very long"},{"1":"Horse","2":"2.9","3":"short"},{"1":"Donkey","2":"3.1","3":"short"},{"1":"European hedgehog","2":"10.1","3":"long"},{"1":"Patas monkey","2":"10.9","3":"long"},{"1":"Western american chipmunk","2":"14.9","3":"very long"},{"1":"Domestic cat","2":"12.5","3":"long"},{"1":"Galago","2":"9.8","3":"limited"},{"1":"Giraffe","2":"1.9","3":"short"},{"1":"Pilot whale","2":"2.7","3":"short"},{"1":"Gray seal","2":"6.2","3":"short"},{"1":"Gray hyrax","2":"6.3","3":"short"},{"1":"Human","2":"8.0","3":"limited"},{"1":"Mongoose lemur","2":"9.5","3":"limited"},{"1":"African elephant","2":"3.3","3":"short"},{"1":"Thick-tailed opposum","2":"19.4","3":"very long"},{"1":"Macaque","2":"10.1","3":"long"},{"1":"Mongolian gerbil","2":"14.2","3":"very long"},{"1":"Golden hamster","2":"14.3","3":"very long"},{"1":"Vole","2":"12.8","3":"long"},{"1":"House mouse","2":"12.5","3":"long"},{"1":"Little brown bat","2":"19.9","3":"very long"},{"1":"Round-tailed muskrat","2":"14.6","3":"very long"},{"1":"Slow loris","2":"11.0","3":"long"},{"1":"Degu","2":"7.7","3":"limited"},{"1":"Northern grasshopper mouse","2":"14.5","3":"very long"},{"1":"Rabbit","2":"8.4","3":"limited"},{"1":"Sheep","2":"3.8","3":"short"},{"1":"Chimpanzee","2":"9.7","3":"limited"},{"1":"Tiger","2":"15.8","3":"very long"},{"1":"Jaguar","2":"10.4","3":"long"},{"1":"Lion","2":"13.5","3":"very long"},{"1":"Baboon","2":"9.4","3":"limited"},{"1":"Desert hedgehog","2":"10.3","3":"long"},{"1":"Potto","2":"11.0","3":"long"},{"1":"Deer mouse","2":"11.5","3":"long"},{"1":"Phalanger","2":"13.7","3":"very long"},{"1":"Caspian seal","2":"3.5","3":"short"},{"1":"Common porpoise","2":"5.6","3":"short"},{"1":"Potoroo","2":"11.1","3":"long"},{"1":"Giant armadillo","2":"18.1","3":"very long"},{"1":"Rock hyrax","2":"5.4","3":"short"},{"1":"Laboratory rat","2":"13.0","3":"long"},{"1":"African striped mouse","2":"8.7","3":"limited"},{"1":"Squirrel monkey","2":"9.6","3":"limited"},{"1":"Eastern american mole","2":"8.4","3":"limited"},{"1":"Cotton rat","2":"11.3","3":"long"},{"1":"Mole rat","2":"10.6","3":"long"},{"1":"Arctic ground squirrel","2":"16.6","3":"very long"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"very long"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"very long"},{"1":"Musk shrew","2":"12.8","3":"long"},{"1":"Pig","2":"9.1","3":"limited"},{"1":"Short-nosed echidna","2":"8.6","3":"limited"},{"1":"Eastern american chipmunk","2":"15.8","3":"very long"},{"1":"Brazilian tapir","2":"4.4","3":"short"},{"1":"Tenrec","2":"15.6","3":"very long"},{"1":"Tree shrew","2":"8.9","3":"limited"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"short"},{"1":"Genet","2":"6.3","3":"short"},{"1":"Arctic fox","2":"12.5","3":"long"},{"1":"Red fox","2":"9.8","3":"limited"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>case_when()</code> function does not only work inside a column, but can be used for grouping across columns:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">silly_groups =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    brainwt <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">&quot;light_headed&quot;</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    sleep_total <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;lazy_sleeper&quot;</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(sleep_rem) <span class="sc">~</span> <span class="st">&quot;absent_rem&quot;</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;other&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(silly_groups)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["silly_groups"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"absent_rem","2":"8"},{"1":"lazy_sleeper","2":"39"},{"1":"light_headed","2":"6"},{"1":"other","2":"30"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<br>
<hr>
</div>
</div>
<div id="splitting-and-merging-columns" class="section level2" number="0.4">
<h2 number="0.4"><span class="header-section-number">0.4</span> <strong>Splitting and merging columns</strong></h2>
<p>Take for example this dataset</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(conservation_expl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/conservation_explanation.csv&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["conservation abbreviation"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"EX = Extinct"},{"1":"EW = Extinct in the wild"},{"1":"CR = Critically Endangered"},{"1":"EN = Endangered"},{"1":"VU = Vulnerable"},{"1":"NT = Near Threatened"},{"1":"LC = Least Concern"},{"1":"DD = Data deficient"},{"1":"NE = Not evaluated"},{"1":"PE = Probably extinct (informal)"},{"1":"PEW = Probably extinct in the wild (informal)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can unmerge any columns by using tidyr’s <code>separate()</code> function. To do this, you have to specify the column to be splitted, followed by the new column names, and which seperator it has to look for.<br />
The sample code shows seperating into two columns based on ‘=’ as a separator.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(conservation_table <span class="ot">&lt;-</span> conservation_expl <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="st">`</span><span class="at">conservation abbreviation</span><span class="st">`</span>, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;abbreviation&quot;</span>, <span class="st">&quot;description&quot;</span>), <span class="at">sep =</span> <span class="st">&quot; = &quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["abbreviation"],"name":[1],"type":["chr"],"align":["left"]},{"label":["description"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"EX","2":"Extinct"},{"1":"EW","2":"Extinct in the wild"},{"1":"CR","2":"Critically Endangered"},{"1":"EN","2":"Endangered"},{"1":"VU","2":"Vulnerable"},{"1":"NT","2":"Near Threatened"},{"1":"LC","2":"Least Concern"},{"1":"DD","2":"Data deficient"},{"1":"NE","2":"Not evaluated"},{"1":"PE","2":"Probably extinct (informal)"},{"1":"PEW","2":"Probably extinct in the wild (informal)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The opposite is tidyr’s <code>unite()</code> function. You specify the new column name, and then the columns to be united, and lastly what seperator you want to use.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>conservation_table <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(united_col, abbreviation, description, <span class="at">sep=</span><span class="st">&quot;: &quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["united_col"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"EX: Extinct"},{"1":"EW: Extinct in the wild"},{"1":"CR: Critically Endangered"},{"1":"EN: Endangered"},{"1":"VU: Vulnerable"},{"1":"NT: Near Threatened"},{"1":"LC: Least Concern"},{"1":"DD: Data deficient"},{"1":"NE: Not evaluated"},{"1":"PE: Probably extinct (informal)"},{"1":"PEW: Probably extinct in the wild (informal)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br></p>
</div>
<div id="bringing-in-columns-from-other-data-tables" class="section level2" number="0.5">
<h2 number="0.5"><span class="header-section-number">0.5</span> <strong>Bringing in columns from other data tables</strong></h2>
<p>If you want to add information from another table, you can use the joining functions from <code>dplyr</code>. The msleep data contains abbreviations for conservation but if you are not familiar with the topic you might need the description we used in the section above inside the msleep data.</p>
<p>Joins would be a chapter in itself, but in this particular case you would do a <code>left_join()</code>, i.e. keeping my main table (on the left), and adding columns from another one to the right. In the <code>by =</code> statement you specify which colums are the same, so the join knows what to add where.<br />
The sample code will add the description of the different conservation states into our main <code>msleep</code> table. The main data contained an extra <code>domisticated</code> label which i wanted to keep. This is done in the last line of the table with an <code>ifelse()</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, conservation) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">conservation =</span> <span class="fu">toupper</span>(conservation)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(conservation_table, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;conservation&quot;</span> <span class="ot">=</span> <span class="st">&quot;abbreviation&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">description =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(description), conservation, description))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["conservation"],"name":[2],"type":["chr"],"align":["left"]},{"label":["description"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah","2":"LC","3":"Least Concern"},{"1":"Owl monkey","2":"NA","3":"NA"},{"1":"Mountain beaver","2":"NT","3":"Near Threatened"},{"1":"Greater short-tailed shrew","2":"LC","3":"Least Concern"},{"1":"Cow","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Three-toed sloth","2":"NA","3":"NA"},{"1":"Northern fur seal","2":"VU","3":"Vulnerable"},{"1":"Vesper mouse","2":"NA","3":"NA"},{"1":"Dog","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Roe deer","2":"LC","3":"Least Concern"},{"1":"Goat","2":"LC","3":"Least Concern"},{"1":"Guinea pig","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Grivet","2":"LC","3":"Least Concern"},{"1":"Chinchilla","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Star-nosed mole","2":"LC","3":"Least Concern"},{"1":"African giant pouched rat","2":"NA","3":"NA"},{"1":"Lesser short-tailed shrew","2":"LC","3":"Least Concern"},{"1":"Long-nosed armadillo","2":"LC","3":"Least Concern"},{"1":"Tree hyrax","2":"LC","3":"Least Concern"},{"1":"North American Opossum","2":"LC","3":"Least Concern"},{"1":"Asian elephant","2":"EN","3":"Endangered"},{"1":"Big brown bat","2":"LC","3":"Least Concern"},{"1":"Horse","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Donkey","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"European hedgehog","2":"LC","3":"Least Concern"},{"1":"Patas monkey","2":"LC","3":"Least Concern"},{"1":"Western american chipmunk","2":"NA","3":"NA"},{"1":"Domestic cat","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Galago","2":"NA","3":"NA"},{"1":"Giraffe","2":"CD","3":"CD"},{"1":"Pilot whale","2":"CD","3":"CD"},{"1":"Gray seal","2":"LC","3":"Least Concern"},{"1":"Gray hyrax","2":"LC","3":"Least Concern"},{"1":"Human","2":"NA","3":"NA"},{"1":"Mongoose lemur","2":"VU","3":"Vulnerable"},{"1":"African elephant","2":"VU","3":"Vulnerable"},{"1":"Thick-tailed opposum","2":"LC","3":"Least Concern"},{"1":"Macaque","2":"NA","3":"NA"},{"1":"Mongolian gerbil","2":"LC","3":"Least Concern"},{"1":"Golden hamster","2":"EN","3":"Endangered"},{"1":"Vole","2":"NA","3":"NA"},{"1":"House mouse","2":"NT","3":"Near Threatened"},{"1":"Little brown bat","2":"NA","3":"NA"},{"1":"Round-tailed muskrat","2":"NT","3":"Near Threatened"},{"1":"Slow loris","2":"NA","3":"NA"},{"1":"Degu","2":"LC","3":"Least Concern"},{"1":"Northern grasshopper mouse","2":"LC","3":"Least Concern"},{"1":"Rabbit","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Sheep","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Chimpanzee","2":"NA","3":"NA"},{"1":"Tiger","2":"EN","3":"Endangered"},{"1":"Jaguar","2":"NT","3":"Near Threatened"},{"1":"Lion","2":"VU","3":"Vulnerable"},{"1":"Baboon","2":"NA","3":"NA"},{"1":"Desert hedgehog","2":"LC","3":"Least Concern"},{"1":"Potto","2":"LC","3":"Least Concern"},{"1":"Deer mouse","2":"NA","3":"NA"},{"1":"Phalanger","2":"NA","3":"NA"},{"1":"Caspian seal","2":"VU","3":"Vulnerable"},{"1":"Common porpoise","2":"VU","3":"Vulnerable"},{"1":"Potoroo","2":"NA","3":"NA"},{"1":"Giant armadillo","2":"EN","3":"Endangered"},{"1":"Rock hyrax","2":"LC","3":"Least Concern"},{"1":"Laboratory rat","2":"LC","3":"Least Concern"},{"1":"African striped mouse","2":"NA","3":"NA"},{"1":"Squirrel monkey","2":"NA","3":"NA"},{"1":"Eastern american mole","2":"LC","3":"Least Concern"},{"1":"Cotton rat","2":"NA","3":"NA"},{"1":"Mole rat","2":"NA","3":"NA"},{"1":"Arctic ground squirrel","2":"LC","3":"Least Concern"},{"1":"Thirteen-lined ground squirrel","2":"LC","3":"Least Concern"},{"1":"Golden-mantled ground squirrel","2":"LC","3":"Least Concern"},{"1":"Musk shrew","2":"NA","3":"NA"},{"1":"Pig","2":"DOMESTICATED","3":"DOMESTICATED"},{"1":"Short-nosed echidna","2":"NA","3":"NA"},{"1":"Eastern american chipmunk","2":"NA","3":"NA"},{"1":"Brazilian tapir","2":"VU","3":"Vulnerable"},{"1":"Tenrec","2":"NA","3":"NA"},{"1":"Tree shrew","2":"NA","3":"NA"},{"1":"Bottle-nosed dolphin","2":"NA","3":"NA"},{"1":"Genet","2":"NA","3":"NA"},{"1":"Arctic fox","2":"NA","3":"NA"},{"1":"Red fox","2":"NA","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br></p>
</div>
<div id="spreading-and-gathering-data" class="section level2" number="0.6">
<h2 number="0.6"><span class="header-section-number">0.6</span> <strong>Spreading and gathering data</strong></h2>
<p>The <code>gather()</code> function will gather up many columns into one. In this case, we have 3 columns that describe a time measure. For some analysis and graphs, it might be necessary to get them all into one.<br />
The <code>gather</code> function needs you to give a name (“key”) for the new descriptive column, and a another name (“value”) for the value column. The columns that you don’t want to gather need to be deselected at the end. In the sample code I’m deselecting the column <code>name</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;sleep_measure&quot;</span>, <span class="at">value =</span> <span class="st">&quot;time&quot;</span>, <span class="sc">-</span>name)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_measure"],"name":[2],"type":["chr"],"align":["left"]},{"label":["time"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"sleep_total","3":"12.1000000"},{"1":"Owl monkey","2":"sleep_total","3":"17.0000000"},{"1":"Mountain beaver","2":"sleep_total","3":"14.4000000"},{"1":"Greater short-tailed shrew","2":"sleep_total","3":"14.9000000"},{"1":"Cow","2":"sleep_total","3":"4.0000000"},{"1":"Three-toed sloth","2":"sleep_total","3":"14.4000000"},{"1":"Northern fur seal","2":"sleep_total","3":"8.7000000"},{"1":"Vesper mouse","2":"sleep_total","3":"7.0000000"},{"1":"Dog","2":"sleep_total","3":"10.1000000"},{"1":"Roe deer","2":"sleep_total","3":"3.0000000"},{"1":"Goat","2":"sleep_total","3":"5.3000000"},{"1":"Guinea pig","2":"sleep_total","3":"9.4000000"},{"1":"Grivet","2":"sleep_total","3":"10.0000000"},{"1":"Chinchilla","2":"sleep_total","3":"12.5000000"},{"1":"Star-nosed mole","2":"sleep_total","3":"10.3000000"},{"1":"African giant pouched rat","2":"sleep_total","3":"8.3000000"},{"1":"Lesser short-tailed shrew","2":"sleep_total","3":"9.1000000"},{"1":"Long-nosed armadillo","2":"sleep_total","3":"17.4000000"},{"1":"Tree hyrax","2":"sleep_total","3":"5.3000000"},{"1":"North American Opossum","2":"sleep_total","3":"18.0000000"},{"1":"Asian elephant","2":"sleep_total","3":"3.9000000"},{"1":"Big brown bat","2":"sleep_total","3":"19.7000000"},{"1":"Horse","2":"sleep_total","3":"2.9000000"},{"1":"Donkey","2":"sleep_total","3":"3.1000000"},{"1":"European hedgehog","2":"sleep_total","3":"10.1000000"},{"1":"Patas monkey","2":"sleep_total","3":"10.9000000"},{"1":"Western american chipmunk","2":"sleep_total","3":"14.9000000"},{"1":"Domestic cat","2":"sleep_total","3":"12.5000000"},{"1":"Galago","2":"sleep_total","3":"9.8000000"},{"1":"Giraffe","2":"sleep_total","3":"1.9000000"},{"1":"Pilot whale","2":"sleep_total","3":"2.7000000"},{"1":"Gray seal","2":"sleep_total","3":"6.2000000"},{"1":"Gray hyrax","2":"sleep_total","3":"6.3000000"},{"1":"Human","2":"sleep_total","3":"8.0000000"},{"1":"Mongoose lemur","2":"sleep_total","3":"9.5000000"},{"1":"African elephant","2":"sleep_total","3":"3.3000000"},{"1":"Thick-tailed opposum","2":"sleep_total","3":"19.4000000"},{"1":"Macaque","2":"sleep_total","3":"10.1000000"},{"1":"Mongolian gerbil","2":"sleep_total","3":"14.2000000"},{"1":"Golden hamster","2":"sleep_total","3":"14.3000000"},{"1":"Vole","2":"sleep_total","3":"12.8000000"},{"1":"House mouse","2":"sleep_total","3":"12.5000000"},{"1":"Little brown bat","2":"sleep_total","3":"19.9000000"},{"1":"Round-tailed muskrat","2":"sleep_total","3":"14.6000000"},{"1":"Slow loris","2":"sleep_total","3":"11.0000000"},{"1":"Degu","2":"sleep_total","3":"7.7000000"},{"1":"Northern grasshopper mouse","2":"sleep_total","3":"14.5000000"},{"1":"Rabbit","2":"sleep_total","3":"8.4000000"},{"1":"Sheep","2":"sleep_total","3":"3.8000000"},{"1":"Chimpanzee","2":"sleep_total","3":"9.7000000"},{"1":"Tiger","2":"sleep_total","3":"15.8000000"},{"1":"Jaguar","2":"sleep_total","3":"10.4000000"},{"1":"Lion","2":"sleep_total","3":"13.5000000"},{"1":"Baboon","2":"sleep_total","3":"9.4000000"},{"1":"Desert hedgehog","2":"sleep_total","3":"10.3000000"},{"1":"Potto","2":"sleep_total","3":"11.0000000"},{"1":"Deer mouse","2":"sleep_total","3":"11.5000000"},{"1":"Phalanger","2":"sleep_total","3":"13.7000000"},{"1":"Caspian seal","2":"sleep_total","3":"3.5000000"},{"1":"Common porpoise","2":"sleep_total","3":"5.6000000"},{"1":"Potoroo","2":"sleep_total","3":"11.1000000"},{"1":"Giant armadillo","2":"sleep_total","3":"18.1000000"},{"1":"Rock hyrax","2":"sleep_total","3":"5.4000000"},{"1":"Laboratory rat","2":"sleep_total","3":"13.0000000"},{"1":"African striped mouse","2":"sleep_total","3":"8.7000000"},{"1":"Squirrel monkey","2":"sleep_total","3":"9.6000000"},{"1":"Eastern american mole","2":"sleep_total","3":"8.4000000"},{"1":"Cotton rat","2":"sleep_total","3":"11.3000000"},{"1":"Mole rat","2":"sleep_total","3":"10.6000000"},{"1":"Arctic ground squirrel","2":"sleep_total","3":"16.6000000"},{"1":"Thirteen-lined ground squirrel","2":"sleep_total","3":"13.8000000"},{"1":"Golden-mantled ground squirrel","2":"sleep_total","3":"15.9000000"},{"1":"Musk shrew","2":"sleep_total","3":"12.8000000"},{"1":"Pig","2":"sleep_total","3":"9.1000000"},{"1":"Short-nosed echidna","2":"sleep_total","3":"8.6000000"},{"1":"Eastern american chipmunk","2":"sleep_total","3":"15.8000000"},{"1":"Brazilian tapir","2":"sleep_total","3":"4.4000000"},{"1":"Tenrec","2":"sleep_total","3":"15.6000000"},{"1":"Tree shrew","2":"sleep_total","3":"8.9000000"},{"1":"Bottle-nosed dolphin","2":"sleep_total","3":"5.2000000"},{"1":"Genet","2":"sleep_total","3":"6.3000000"},{"1":"Arctic fox","2":"sleep_total","3":"12.5000000"},{"1":"Red fox","2":"sleep_total","3":"9.8000000"},{"1":"Cheetah","2":"sleep_rem","3":"NA"},{"1":"Owl monkey","2":"sleep_rem","3":"1.8000000"},{"1":"Mountain beaver","2":"sleep_rem","3":"2.4000000"},{"1":"Greater short-tailed shrew","2":"sleep_rem","3":"2.3000000"},{"1":"Cow","2":"sleep_rem","3":"0.7000000"},{"1":"Three-toed sloth","2":"sleep_rem","3":"2.2000000"},{"1":"Northern fur seal","2":"sleep_rem","3":"1.4000000"},{"1":"Vesper mouse","2":"sleep_rem","3":"NA"},{"1":"Dog","2":"sleep_rem","3":"2.9000000"},{"1":"Roe deer","2":"sleep_rem","3":"NA"},{"1":"Goat","2":"sleep_rem","3":"0.6000000"},{"1":"Guinea pig","2":"sleep_rem","3":"0.8000000"},{"1":"Grivet","2":"sleep_rem","3":"0.7000000"},{"1":"Chinchilla","2":"sleep_rem","3":"1.5000000"},{"1":"Star-nosed mole","2":"sleep_rem","3":"2.2000000"},{"1":"African giant pouched rat","2":"sleep_rem","3":"2.0000000"},{"1":"Lesser short-tailed shrew","2":"sleep_rem","3":"1.4000000"},{"1":"Long-nosed armadillo","2":"sleep_rem","3":"3.1000000"},{"1":"Tree hyrax","2":"sleep_rem","3":"0.5000000"},{"1":"North American Opossum","2":"sleep_rem","3":"4.9000000"},{"1":"Asian elephant","2":"sleep_rem","3":"NA"},{"1":"Big brown bat","2":"sleep_rem","3":"3.9000000"},{"1":"Horse","2":"sleep_rem","3":"0.6000000"},{"1":"Donkey","2":"sleep_rem","3":"0.4000000"},{"1":"European hedgehog","2":"sleep_rem","3":"3.5000000"},{"1":"Patas monkey","2":"sleep_rem","3":"1.1000000"},{"1":"Western american chipmunk","2":"sleep_rem","3":"NA"},{"1":"Domestic cat","2":"sleep_rem","3":"3.2000000"},{"1":"Galago","2":"sleep_rem","3":"1.1000000"},{"1":"Giraffe","2":"sleep_rem","3":"0.4000000"},{"1":"Pilot whale","2":"sleep_rem","3":"0.1000000"},{"1":"Gray seal","2":"sleep_rem","3":"1.5000000"},{"1":"Gray hyrax","2":"sleep_rem","3":"0.6000000"},{"1":"Human","2":"sleep_rem","3":"1.9000000"},{"1":"Mongoose lemur","2":"sleep_rem","3":"0.9000000"},{"1":"African elephant","2":"sleep_rem","3":"NA"},{"1":"Thick-tailed opposum","2":"sleep_rem","3":"6.6000000"},{"1":"Macaque","2":"sleep_rem","3":"1.2000000"},{"1":"Mongolian gerbil","2":"sleep_rem","3":"1.9000000"},{"1":"Golden hamster","2":"sleep_rem","3":"3.1000000"},{"1":"Vole","2":"sleep_rem","3":"NA"},{"1":"House mouse","2":"sleep_rem","3":"1.4000000"},{"1":"Little brown bat","2":"sleep_rem","3":"2.0000000"},{"1":"Round-tailed muskrat","2":"sleep_rem","3":"NA"},{"1":"Slow loris","2":"sleep_rem","3":"NA"},{"1":"Degu","2":"sleep_rem","3":"0.9000000"},{"1":"Northern grasshopper mouse","2":"sleep_rem","3":"NA"},{"1":"Rabbit","2":"sleep_rem","3":"0.9000000"},{"1":"Sheep","2":"sleep_rem","3":"0.6000000"},{"1":"Chimpanzee","2":"sleep_rem","3":"1.4000000"},{"1":"Tiger","2":"sleep_rem","3":"NA"},{"1":"Jaguar","2":"sleep_rem","3":"NA"},{"1":"Lion","2":"sleep_rem","3":"NA"},{"1":"Baboon","2":"sleep_rem","3":"1.0000000"},{"1":"Desert hedgehog","2":"sleep_rem","3":"2.7000000"},{"1":"Potto","2":"sleep_rem","3":"NA"},{"1":"Deer mouse","2":"sleep_rem","3":"NA"},{"1":"Phalanger","2":"sleep_rem","3":"1.8000000"},{"1":"Caspian seal","2":"sleep_rem","3":"0.4000000"},{"1":"Common porpoise","2":"sleep_rem","3":"NA"},{"1":"Potoroo","2":"sleep_rem","3":"1.5000000"},{"1":"Giant armadillo","2":"sleep_rem","3":"6.1000000"},{"1":"Rock hyrax","2":"sleep_rem","3":"0.5000000"},{"1":"Laboratory rat","2":"sleep_rem","3":"2.4000000"},{"1":"African striped mouse","2":"sleep_rem","3":"NA"},{"1":"Squirrel monkey","2":"sleep_rem","3":"1.4000000"},{"1":"Eastern american mole","2":"sleep_rem","3":"2.1000000"},{"1":"Cotton rat","2":"sleep_rem","3":"1.1000000"},{"1":"Mole rat","2":"sleep_rem","3":"2.4000000"},{"1":"Arctic ground squirrel","2":"sleep_rem","3":"NA"},{"1":"Thirteen-lined ground squirrel","2":"sleep_rem","3":"3.4000000"},{"1":"Golden-mantled ground squirrel","2":"sleep_rem","3":"3.0000000"},{"1":"Musk shrew","2":"sleep_rem","3":"2.0000000"},{"1":"Pig","2":"sleep_rem","3":"2.4000000"},{"1":"Short-nosed echidna","2":"sleep_rem","3":"NA"},{"1":"Eastern american chipmunk","2":"sleep_rem","3":"NA"},{"1":"Brazilian tapir","2":"sleep_rem","3":"1.0000000"},{"1":"Tenrec","2":"sleep_rem","3":"2.3000000"},{"1":"Tree shrew","2":"sleep_rem","3":"2.6000000"},{"1":"Bottle-nosed dolphin","2":"sleep_rem","3":"NA"},{"1":"Genet","2":"sleep_rem","3":"1.3000000"},{"1":"Arctic fox","2":"sleep_rem","3":"NA"},{"1":"Red fox","2":"sleep_rem","3":"2.4000000"},{"1":"Cheetah","2":"sleep_cycle","3":"NA"},{"1":"Owl monkey","2":"sleep_cycle","3":"NA"},{"1":"Mountain beaver","2":"sleep_cycle","3":"NA"},{"1":"Greater short-tailed shrew","2":"sleep_cycle","3":"0.1333333"},{"1":"Cow","2":"sleep_cycle","3":"0.6666667"},{"1":"Three-toed sloth","2":"sleep_cycle","3":"0.7666667"},{"1":"Northern fur seal","2":"sleep_cycle","3":"0.3833333"},{"1":"Vesper mouse","2":"sleep_cycle","3":"NA"},{"1":"Dog","2":"sleep_cycle","3":"0.3333333"},{"1":"Roe deer","2":"sleep_cycle","3":"NA"},{"1":"Goat","2":"sleep_cycle","3":"NA"},{"1":"Guinea pig","2":"sleep_cycle","3":"0.2166667"},{"1":"Grivet","2":"sleep_cycle","3":"NA"},{"1":"Chinchilla","2":"sleep_cycle","3":"0.1166667"},{"1":"Star-nosed mole","2":"sleep_cycle","3":"NA"},{"1":"African giant pouched rat","2":"sleep_cycle","3":"NA"},{"1":"Lesser short-tailed shrew","2":"sleep_cycle","3":"0.1500000"},{"1":"Long-nosed armadillo","2":"sleep_cycle","3":"0.3833333"},{"1":"Tree hyrax","2":"sleep_cycle","3":"NA"},{"1":"North American Opossum","2":"sleep_cycle","3":"0.3333333"},{"1":"Asian elephant","2":"sleep_cycle","3":"NA"},{"1":"Big brown bat","2":"sleep_cycle","3":"0.1166667"},{"1":"Horse","2":"sleep_cycle","3":"1.0000000"},{"1":"Donkey","2":"sleep_cycle","3":"NA"},{"1":"European hedgehog","2":"sleep_cycle","3":"0.2833333"},{"1":"Patas monkey","2":"sleep_cycle","3":"NA"},{"1":"Western american chipmunk","2":"sleep_cycle","3":"NA"},{"1":"Domestic cat","2":"sleep_cycle","3":"0.4166667"},{"1":"Galago","2":"sleep_cycle","3":"0.5500000"},{"1":"Giraffe","2":"sleep_cycle","3":"NA"},{"1":"Pilot whale","2":"sleep_cycle","3":"NA"},{"1":"Gray seal","2":"sleep_cycle","3":"NA"},{"1":"Gray hyrax","2":"sleep_cycle","3":"NA"},{"1":"Human","2":"sleep_cycle","3":"1.5000000"},{"1":"Mongoose lemur","2":"sleep_cycle","3":"NA"},{"1":"African elephant","2":"sleep_cycle","3":"NA"},{"1":"Thick-tailed opposum","2":"sleep_cycle","3":"NA"},{"1":"Macaque","2":"sleep_cycle","3":"0.7500000"},{"1":"Mongolian gerbil","2":"sleep_cycle","3":"NA"},{"1":"Golden hamster","2":"sleep_cycle","3":"0.2000000"},{"1":"Vole","2":"sleep_cycle","3":"NA"},{"1":"House mouse","2":"sleep_cycle","3":"0.1833333"},{"1":"Little brown bat","2":"sleep_cycle","3":"0.2000000"},{"1":"Round-tailed muskrat","2":"sleep_cycle","3":"NA"},{"1":"Slow loris","2":"sleep_cycle","3":"NA"},{"1":"Degu","2":"sleep_cycle","3":"NA"},{"1":"Northern grasshopper mouse","2":"sleep_cycle","3":"NA"},{"1":"Rabbit","2":"sleep_cycle","3":"0.4166667"},{"1":"Sheep","2":"sleep_cycle","3":"NA"},{"1":"Chimpanzee","2":"sleep_cycle","3":"1.4166667"},{"1":"Tiger","2":"sleep_cycle","3":"NA"},{"1":"Jaguar","2":"sleep_cycle","3":"NA"},{"1":"Lion","2":"sleep_cycle","3":"NA"},{"1":"Baboon","2":"sleep_cycle","3":"0.6666667"},{"1":"Desert hedgehog","2":"sleep_cycle","3":"NA"},{"1":"Potto","2":"sleep_cycle","3":"NA"},{"1":"Deer mouse","2":"sleep_cycle","3":"NA"},{"1":"Phalanger","2":"sleep_cycle","3":"NA"},{"1":"Caspian seal","2":"sleep_cycle","3":"NA"},{"1":"Common porpoise","2":"sleep_cycle","3":"NA"},{"1":"Potoroo","2":"sleep_cycle","3":"NA"},{"1":"Giant armadillo","2":"sleep_cycle","3":"NA"},{"1":"Rock hyrax","2":"sleep_cycle","3":"NA"},{"1":"Laboratory rat","2":"sleep_cycle","3":"0.1833333"},{"1":"African striped mouse","2":"sleep_cycle","3":"NA"},{"1":"Squirrel monkey","2":"sleep_cycle","3":"NA"},{"1":"Eastern american mole","2":"sleep_cycle","3":"0.1666667"},{"1":"Cotton rat","2":"sleep_cycle","3":"0.1500000"},{"1":"Mole rat","2":"sleep_cycle","3":"NA"},{"1":"Arctic ground squirrel","2":"sleep_cycle","3":"NA"},{"1":"Thirteen-lined ground squirrel","2":"sleep_cycle","3":"0.2166667"},{"1":"Golden-mantled ground squirrel","2":"sleep_cycle","3":"NA"},{"1":"Musk shrew","2":"sleep_cycle","3":"0.1833333"},{"1":"Pig","2":"sleep_cycle","3":"0.5000000"},{"1":"Short-nosed echidna","2":"sleep_cycle","3":"NA"},{"1":"Eastern american chipmunk","2":"sleep_cycle","3":"NA"},{"1":"Brazilian tapir","2":"sleep_cycle","3":"0.9000000"},{"1":"Tenrec","2":"sleep_cycle","3":"NA"},{"1":"Tree shrew","2":"sleep_cycle","3":"0.2333333"},{"1":"Bottle-nosed dolphin","2":"sleep_cycle","3":"NA"},{"1":"Genet","2":"sleep_cycle","3":"NA"},{"1":"Arctic fox","2":"sleep_cycle","3":"NA"},{"1":"Red fox","2":"sleep_cycle","3":"0.3500000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>A useful attribute in gathering is the <code>factor_key</code> argument which is <code>FALSE</code>by default. In the previous example the new column <code>sleep_measure</code> is a character vector. If you are going to summarise or plot afterwards, that column will be ordered alphabetically.<br />
If you want to preserve the original order, add <code>factor_key = TRUE</code> which will make the new column an ordered factor.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(msleep_g <span class="ot">&lt;-</span> msleep <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;sleep_measure&quot;</span>, <span class="at">value =</span> <span class="st">&quot;time&quot;</span>, <span class="sc">-</span>name, <span class="at">factor_key =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_measure"],"name":[2],"type":["fct"],"align":["left"]},{"label":["time"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"sleep_total","3":"12.1000000"},{"1":"Owl monkey","2":"sleep_total","3":"17.0000000"},{"1":"Mountain beaver","2":"sleep_total","3":"14.4000000"},{"1":"Greater short-tailed shrew","2":"sleep_total","3":"14.9000000"},{"1":"Cow","2":"sleep_total","3":"4.0000000"},{"1":"Three-toed sloth","2":"sleep_total","3":"14.4000000"},{"1":"Northern fur seal","2":"sleep_total","3":"8.7000000"},{"1":"Vesper mouse","2":"sleep_total","3":"7.0000000"},{"1":"Dog","2":"sleep_total","3":"10.1000000"},{"1":"Roe deer","2":"sleep_total","3":"3.0000000"},{"1":"Goat","2":"sleep_total","3":"5.3000000"},{"1":"Guinea pig","2":"sleep_total","3":"9.4000000"},{"1":"Grivet","2":"sleep_total","3":"10.0000000"},{"1":"Chinchilla","2":"sleep_total","3":"12.5000000"},{"1":"Star-nosed mole","2":"sleep_total","3":"10.3000000"},{"1":"African giant pouched rat","2":"sleep_total","3":"8.3000000"},{"1":"Lesser short-tailed shrew","2":"sleep_total","3":"9.1000000"},{"1":"Long-nosed armadillo","2":"sleep_total","3":"17.4000000"},{"1":"Tree hyrax","2":"sleep_total","3":"5.3000000"},{"1":"North American Opossum","2":"sleep_total","3":"18.0000000"},{"1":"Asian elephant","2":"sleep_total","3":"3.9000000"},{"1":"Big brown bat","2":"sleep_total","3":"19.7000000"},{"1":"Horse","2":"sleep_total","3":"2.9000000"},{"1":"Donkey","2":"sleep_total","3":"3.1000000"},{"1":"European hedgehog","2":"sleep_total","3":"10.1000000"},{"1":"Patas monkey","2":"sleep_total","3":"10.9000000"},{"1":"Western american chipmunk","2":"sleep_total","3":"14.9000000"},{"1":"Domestic cat","2":"sleep_total","3":"12.5000000"},{"1":"Galago","2":"sleep_total","3":"9.8000000"},{"1":"Giraffe","2":"sleep_total","3":"1.9000000"},{"1":"Pilot whale","2":"sleep_total","3":"2.7000000"},{"1":"Gray seal","2":"sleep_total","3":"6.2000000"},{"1":"Gray hyrax","2":"sleep_total","3":"6.3000000"},{"1":"Human","2":"sleep_total","3":"8.0000000"},{"1":"Mongoose lemur","2":"sleep_total","3":"9.5000000"},{"1":"African elephant","2":"sleep_total","3":"3.3000000"},{"1":"Thick-tailed opposum","2":"sleep_total","3":"19.4000000"},{"1":"Macaque","2":"sleep_total","3":"10.1000000"},{"1":"Mongolian gerbil","2":"sleep_total","3":"14.2000000"},{"1":"Golden hamster","2":"sleep_total","3":"14.3000000"},{"1":"Vole","2":"sleep_total","3":"12.8000000"},{"1":"House mouse","2":"sleep_total","3":"12.5000000"},{"1":"Little brown bat","2":"sleep_total","3":"19.9000000"},{"1":"Round-tailed muskrat","2":"sleep_total","3":"14.6000000"},{"1":"Slow loris","2":"sleep_total","3":"11.0000000"},{"1":"Degu","2":"sleep_total","3":"7.7000000"},{"1":"Northern grasshopper mouse","2":"sleep_total","3":"14.5000000"},{"1":"Rabbit","2":"sleep_total","3":"8.4000000"},{"1":"Sheep","2":"sleep_total","3":"3.8000000"},{"1":"Chimpanzee","2":"sleep_total","3":"9.7000000"},{"1":"Tiger","2":"sleep_total","3":"15.8000000"},{"1":"Jaguar","2":"sleep_total","3":"10.4000000"},{"1":"Lion","2":"sleep_total","3":"13.5000000"},{"1":"Baboon","2":"sleep_total","3":"9.4000000"},{"1":"Desert hedgehog","2":"sleep_total","3":"10.3000000"},{"1":"Potto","2":"sleep_total","3":"11.0000000"},{"1":"Deer mouse","2":"sleep_total","3":"11.5000000"},{"1":"Phalanger","2":"sleep_total","3":"13.7000000"},{"1":"Caspian seal","2":"sleep_total","3":"3.5000000"},{"1":"Common porpoise","2":"sleep_total","3":"5.6000000"},{"1":"Potoroo","2":"sleep_total","3":"11.1000000"},{"1":"Giant armadillo","2":"sleep_total","3":"18.1000000"},{"1":"Rock hyrax","2":"sleep_total","3":"5.4000000"},{"1":"Laboratory rat","2":"sleep_total","3":"13.0000000"},{"1":"African striped mouse","2":"sleep_total","3":"8.7000000"},{"1":"Squirrel monkey","2":"sleep_total","3":"9.6000000"},{"1":"Eastern american mole","2":"sleep_total","3":"8.4000000"},{"1":"Cotton rat","2":"sleep_total","3":"11.3000000"},{"1":"Mole rat","2":"sleep_total","3":"10.6000000"},{"1":"Arctic ground squirrel","2":"sleep_total","3":"16.6000000"},{"1":"Thirteen-lined ground squirrel","2":"sleep_total","3":"13.8000000"},{"1":"Golden-mantled ground squirrel","2":"sleep_total","3":"15.9000000"},{"1":"Musk shrew","2":"sleep_total","3":"12.8000000"},{"1":"Pig","2":"sleep_total","3":"9.1000000"},{"1":"Short-nosed echidna","2":"sleep_total","3":"8.6000000"},{"1":"Eastern american chipmunk","2":"sleep_total","3":"15.8000000"},{"1":"Brazilian tapir","2":"sleep_total","3":"4.4000000"},{"1":"Tenrec","2":"sleep_total","3":"15.6000000"},{"1":"Tree shrew","2":"sleep_total","3":"8.9000000"},{"1":"Bottle-nosed dolphin","2":"sleep_total","3":"5.2000000"},{"1":"Genet","2":"sleep_total","3":"6.3000000"},{"1":"Arctic fox","2":"sleep_total","3":"12.5000000"},{"1":"Red fox","2":"sleep_total","3":"9.8000000"},{"1":"Cheetah","2":"sleep_rem","3":"NA"},{"1":"Owl monkey","2":"sleep_rem","3":"1.8000000"},{"1":"Mountain beaver","2":"sleep_rem","3":"2.4000000"},{"1":"Greater short-tailed shrew","2":"sleep_rem","3":"2.3000000"},{"1":"Cow","2":"sleep_rem","3":"0.7000000"},{"1":"Three-toed sloth","2":"sleep_rem","3":"2.2000000"},{"1":"Northern fur seal","2":"sleep_rem","3":"1.4000000"},{"1":"Vesper mouse","2":"sleep_rem","3":"NA"},{"1":"Dog","2":"sleep_rem","3":"2.9000000"},{"1":"Roe deer","2":"sleep_rem","3":"NA"},{"1":"Goat","2":"sleep_rem","3":"0.6000000"},{"1":"Guinea pig","2":"sleep_rem","3":"0.8000000"},{"1":"Grivet","2":"sleep_rem","3":"0.7000000"},{"1":"Chinchilla","2":"sleep_rem","3":"1.5000000"},{"1":"Star-nosed mole","2":"sleep_rem","3":"2.2000000"},{"1":"African giant pouched rat","2":"sleep_rem","3":"2.0000000"},{"1":"Lesser short-tailed shrew","2":"sleep_rem","3":"1.4000000"},{"1":"Long-nosed armadillo","2":"sleep_rem","3":"3.1000000"},{"1":"Tree hyrax","2":"sleep_rem","3":"0.5000000"},{"1":"North American Opossum","2":"sleep_rem","3":"4.9000000"},{"1":"Asian elephant","2":"sleep_rem","3":"NA"},{"1":"Big brown bat","2":"sleep_rem","3":"3.9000000"},{"1":"Horse","2":"sleep_rem","3":"0.6000000"},{"1":"Donkey","2":"sleep_rem","3":"0.4000000"},{"1":"European hedgehog","2":"sleep_rem","3":"3.5000000"},{"1":"Patas monkey","2":"sleep_rem","3":"1.1000000"},{"1":"Western american chipmunk","2":"sleep_rem","3":"NA"},{"1":"Domestic cat","2":"sleep_rem","3":"3.2000000"},{"1":"Galago","2":"sleep_rem","3":"1.1000000"},{"1":"Giraffe","2":"sleep_rem","3":"0.4000000"},{"1":"Pilot whale","2":"sleep_rem","3":"0.1000000"},{"1":"Gray seal","2":"sleep_rem","3":"1.5000000"},{"1":"Gray hyrax","2":"sleep_rem","3":"0.6000000"},{"1":"Human","2":"sleep_rem","3":"1.9000000"},{"1":"Mongoose lemur","2":"sleep_rem","3":"0.9000000"},{"1":"African elephant","2":"sleep_rem","3":"NA"},{"1":"Thick-tailed opposum","2":"sleep_rem","3":"6.6000000"},{"1":"Macaque","2":"sleep_rem","3":"1.2000000"},{"1":"Mongolian gerbil","2":"sleep_rem","3":"1.9000000"},{"1":"Golden hamster","2":"sleep_rem","3":"3.1000000"},{"1":"Vole","2":"sleep_rem","3":"NA"},{"1":"House mouse","2":"sleep_rem","3":"1.4000000"},{"1":"Little brown bat","2":"sleep_rem","3":"2.0000000"},{"1":"Round-tailed muskrat","2":"sleep_rem","3":"NA"},{"1":"Slow loris","2":"sleep_rem","3":"NA"},{"1":"Degu","2":"sleep_rem","3":"0.9000000"},{"1":"Northern grasshopper mouse","2":"sleep_rem","3":"NA"},{"1":"Rabbit","2":"sleep_rem","3":"0.9000000"},{"1":"Sheep","2":"sleep_rem","3":"0.6000000"},{"1":"Chimpanzee","2":"sleep_rem","3":"1.4000000"},{"1":"Tiger","2":"sleep_rem","3":"NA"},{"1":"Jaguar","2":"sleep_rem","3":"NA"},{"1":"Lion","2":"sleep_rem","3":"NA"},{"1":"Baboon","2":"sleep_rem","3":"1.0000000"},{"1":"Desert hedgehog","2":"sleep_rem","3":"2.7000000"},{"1":"Potto","2":"sleep_rem","3":"NA"},{"1":"Deer mouse","2":"sleep_rem","3":"NA"},{"1":"Phalanger","2":"sleep_rem","3":"1.8000000"},{"1":"Caspian seal","2":"sleep_rem","3":"0.4000000"},{"1":"Common porpoise","2":"sleep_rem","3":"NA"},{"1":"Potoroo","2":"sleep_rem","3":"1.5000000"},{"1":"Giant armadillo","2":"sleep_rem","3":"6.1000000"},{"1":"Rock hyrax","2":"sleep_rem","3":"0.5000000"},{"1":"Laboratory rat","2":"sleep_rem","3":"2.4000000"},{"1":"African striped mouse","2":"sleep_rem","3":"NA"},{"1":"Squirrel monkey","2":"sleep_rem","3":"1.4000000"},{"1":"Eastern american mole","2":"sleep_rem","3":"2.1000000"},{"1":"Cotton rat","2":"sleep_rem","3":"1.1000000"},{"1":"Mole rat","2":"sleep_rem","3":"2.4000000"},{"1":"Arctic ground squirrel","2":"sleep_rem","3":"NA"},{"1":"Thirteen-lined ground squirrel","2":"sleep_rem","3":"3.4000000"},{"1":"Golden-mantled ground squirrel","2":"sleep_rem","3":"3.0000000"},{"1":"Musk shrew","2":"sleep_rem","3":"2.0000000"},{"1":"Pig","2":"sleep_rem","3":"2.4000000"},{"1":"Short-nosed echidna","2":"sleep_rem","3":"NA"},{"1":"Eastern american chipmunk","2":"sleep_rem","3":"NA"},{"1":"Brazilian tapir","2":"sleep_rem","3":"1.0000000"},{"1":"Tenrec","2":"sleep_rem","3":"2.3000000"},{"1":"Tree shrew","2":"sleep_rem","3":"2.6000000"},{"1":"Bottle-nosed dolphin","2":"sleep_rem","3":"NA"},{"1":"Genet","2":"sleep_rem","3":"1.3000000"},{"1":"Arctic fox","2":"sleep_rem","3":"NA"},{"1":"Red fox","2":"sleep_rem","3":"2.4000000"},{"1":"Cheetah","2":"sleep_cycle","3":"NA"},{"1":"Owl monkey","2":"sleep_cycle","3":"NA"},{"1":"Mountain beaver","2":"sleep_cycle","3":"NA"},{"1":"Greater short-tailed shrew","2":"sleep_cycle","3":"0.1333333"},{"1":"Cow","2":"sleep_cycle","3":"0.6666667"},{"1":"Three-toed sloth","2":"sleep_cycle","3":"0.7666667"},{"1":"Northern fur seal","2":"sleep_cycle","3":"0.3833333"},{"1":"Vesper mouse","2":"sleep_cycle","3":"NA"},{"1":"Dog","2":"sleep_cycle","3":"0.3333333"},{"1":"Roe deer","2":"sleep_cycle","3":"NA"},{"1":"Goat","2":"sleep_cycle","3":"NA"},{"1":"Guinea pig","2":"sleep_cycle","3":"0.2166667"},{"1":"Grivet","2":"sleep_cycle","3":"NA"},{"1":"Chinchilla","2":"sleep_cycle","3":"0.1166667"},{"1":"Star-nosed mole","2":"sleep_cycle","3":"NA"},{"1":"African giant pouched rat","2":"sleep_cycle","3":"NA"},{"1":"Lesser short-tailed shrew","2":"sleep_cycle","3":"0.1500000"},{"1":"Long-nosed armadillo","2":"sleep_cycle","3":"0.3833333"},{"1":"Tree hyrax","2":"sleep_cycle","3":"NA"},{"1":"North American Opossum","2":"sleep_cycle","3":"0.3333333"},{"1":"Asian elephant","2":"sleep_cycle","3":"NA"},{"1":"Big brown bat","2":"sleep_cycle","3":"0.1166667"},{"1":"Horse","2":"sleep_cycle","3":"1.0000000"},{"1":"Donkey","2":"sleep_cycle","3":"NA"},{"1":"European hedgehog","2":"sleep_cycle","3":"0.2833333"},{"1":"Patas monkey","2":"sleep_cycle","3":"NA"},{"1":"Western american chipmunk","2":"sleep_cycle","3":"NA"},{"1":"Domestic cat","2":"sleep_cycle","3":"0.4166667"},{"1":"Galago","2":"sleep_cycle","3":"0.5500000"},{"1":"Giraffe","2":"sleep_cycle","3":"NA"},{"1":"Pilot whale","2":"sleep_cycle","3":"NA"},{"1":"Gray seal","2":"sleep_cycle","3":"NA"},{"1":"Gray hyrax","2":"sleep_cycle","3":"NA"},{"1":"Human","2":"sleep_cycle","3":"1.5000000"},{"1":"Mongoose lemur","2":"sleep_cycle","3":"NA"},{"1":"African elephant","2":"sleep_cycle","3":"NA"},{"1":"Thick-tailed opposum","2":"sleep_cycle","3":"NA"},{"1":"Macaque","2":"sleep_cycle","3":"0.7500000"},{"1":"Mongolian gerbil","2":"sleep_cycle","3":"NA"},{"1":"Golden hamster","2":"sleep_cycle","3":"0.2000000"},{"1":"Vole","2":"sleep_cycle","3":"NA"},{"1":"House mouse","2":"sleep_cycle","3":"0.1833333"},{"1":"Little brown bat","2":"sleep_cycle","3":"0.2000000"},{"1":"Round-tailed muskrat","2":"sleep_cycle","3":"NA"},{"1":"Slow loris","2":"sleep_cycle","3":"NA"},{"1":"Degu","2":"sleep_cycle","3":"NA"},{"1":"Northern grasshopper mouse","2":"sleep_cycle","3":"NA"},{"1":"Rabbit","2":"sleep_cycle","3":"0.4166667"},{"1":"Sheep","2":"sleep_cycle","3":"NA"},{"1":"Chimpanzee","2":"sleep_cycle","3":"1.4166667"},{"1":"Tiger","2":"sleep_cycle","3":"NA"},{"1":"Jaguar","2":"sleep_cycle","3":"NA"},{"1":"Lion","2":"sleep_cycle","3":"NA"},{"1":"Baboon","2":"sleep_cycle","3":"0.6666667"},{"1":"Desert hedgehog","2":"sleep_cycle","3":"NA"},{"1":"Potto","2":"sleep_cycle","3":"NA"},{"1":"Deer mouse","2":"sleep_cycle","3":"NA"},{"1":"Phalanger","2":"sleep_cycle","3":"NA"},{"1":"Caspian seal","2":"sleep_cycle","3":"NA"},{"1":"Common porpoise","2":"sleep_cycle","3":"NA"},{"1":"Potoroo","2":"sleep_cycle","3":"NA"},{"1":"Giant armadillo","2":"sleep_cycle","3":"NA"},{"1":"Rock hyrax","2":"sleep_cycle","3":"NA"},{"1":"Laboratory rat","2":"sleep_cycle","3":"0.1833333"},{"1":"African striped mouse","2":"sleep_cycle","3":"NA"},{"1":"Squirrel monkey","2":"sleep_cycle","3":"NA"},{"1":"Eastern american mole","2":"sleep_cycle","3":"0.1666667"},{"1":"Cotton rat","2":"sleep_cycle","3":"0.1500000"},{"1":"Mole rat","2":"sleep_cycle","3":"NA"},{"1":"Arctic ground squirrel","2":"sleep_cycle","3":"NA"},{"1":"Thirteen-lined ground squirrel","2":"sleep_cycle","3":"0.2166667"},{"1":"Golden-mantled ground squirrel","2":"sleep_cycle","3":"NA"},{"1":"Musk shrew","2":"sleep_cycle","3":"0.1833333"},{"1":"Pig","2":"sleep_cycle","3":"0.5000000"},{"1":"Short-nosed echidna","2":"sleep_cycle","3":"NA"},{"1":"Eastern american chipmunk","2":"sleep_cycle","3":"NA"},{"1":"Brazilian tapir","2":"sleep_cycle","3":"0.9000000"},{"1":"Tenrec","2":"sleep_cycle","3":"NA"},{"1":"Tree shrew","2":"sleep_cycle","3":"0.2333333"},{"1":"Bottle-nosed dolphin","2":"sleep_cycle","3":"NA"},{"1":"Genet","2":"sleep_cycle","3":"NA"},{"1":"Arctic fox","2":"sleep_cycle","3":"NA"},{"1":"Red fox","2":"sleep_cycle","3":"0.3500000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The opposite of gathering is spreading. Spread will take one column and make multiple columns out of it. If you would have started with the previous column, you could get the differrent sleep measures in different columns:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>msleep_g <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(sleep_measure, time)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["sleep_rem"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sleep_cycle"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"African elephant","2":"3.3","3":"NA","4":"NA"},{"1":"African giant pouched rat","2":"8.3","3":"2.0","4":"NA"},{"1":"African striped mouse","2":"8.7","3":"NA","4":"NA"},{"1":"Arctic fox","2":"12.5","3":"NA","4":"NA"},{"1":"Arctic ground squirrel","2":"16.6","3":"NA","4":"NA"},{"1":"Asian elephant","2":"3.9","3":"NA","4":"NA"},{"1":"Baboon","2":"9.4","3":"1.0","4":"0.6666667"},{"1":"Big brown bat","2":"19.7","3":"3.9","4":"0.1166667"},{"1":"Bottle-nosed dolphin","2":"5.2","3":"NA","4":"NA"},{"1":"Brazilian tapir","2":"4.4","3":"1.0","4":"0.9000000"},{"1":"Caspian seal","2":"3.5","3":"0.4","4":"NA"},{"1":"Cheetah","2":"12.1","3":"NA","4":"NA"},{"1":"Chimpanzee","2":"9.7","3":"1.4","4":"1.4166667"},{"1":"Chinchilla","2":"12.5","3":"1.5","4":"0.1166667"},{"1":"Common porpoise","2":"5.6","3":"NA","4":"NA"},{"1":"Cotton rat","2":"11.3","3":"1.1","4":"0.1500000"},{"1":"Cow","2":"4.0","3":"0.7","4":"0.6666667"},{"1":"Deer mouse","2":"11.5","3":"NA","4":"NA"},{"1":"Degu","2":"7.7","3":"0.9","4":"NA"},{"1":"Desert hedgehog","2":"10.3","3":"2.7","4":"NA"},{"1":"Dog","2":"10.1","3":"2.9","4":"0.3333333"},{"1":"Domestic cat","2":"12.5","3":"3.2","4":"0.4166667"},{"1":"Donkey","2":"3.1","3":"0.4","4":"NA"},{"1":"Eastern american chipmunk","2":"15.8","3":"NA","4":"NA"},{"1":"Eastern american mole","2":"8.4","3":"2.1","4":"0.1666667"},{"1":"European hedgehog","2":"10.1","3":"3.5","4":"0.2833333"},{"1":"Galago","2":"9.8","3":"1.1","4":"0.5500000"},{"1":"Genet","2":"6.3","3":"1.3","4":"NA"},{"1":"Giant armadillo","2":"18.1","3":"6.1","4":"NA"},{"1":"Giraffe","2":"1.9","3":"0.4","4":"NA"},{"1":"Goat","2":"5.3","3":"0.6","4":"NA"},{"1":"Golden-mantled ground squirrel","2":"15.9","3":"3.0","4":"NA"},{"1":"Golden hamster","2":"14.3","3":"3.1","4":"0.2000000"},{"1":"Gray hyrax","2":"6.3","3":"0.6","4":"NA"},{"1":"Gray seal","2":"6.2","3":"1.5","4":"NA"},{"1":"Greater short-tailed shrew","2":"14.9","3":"2.3","4":"0.1333333"},{"1":"Grivet","2":"10.0","3":"0.7","4":"NA"},{"1":"Guinea pig","2":"9.4","3":"0.8","4":"0.2166667"},{"1":"Horse","2":"2.9","3":"0.6","4":"1.0000000"},{"1":"House mouse","2":"12.5","3":"1.4","4":"0.1833333"},{"1":"Human","2":"8.0","3":"1.9","4":"1.5000000"},{"1":"Jaguar","2":"10.4","3":"NA","4":"NA"},{"1":"Laboratory rat","2":"13.0","3":"2.4","4":"0.1833333"},{"1":"Lesser short-tailed shrew","2":"9.1","3":"1.4","4":"0.1500000"},{"1":"Lion","2":"13.5","3":"NA","4":"NA"},{"1":"Little brown bat","2":"19.9","3":"2.0","4":"0.2000000"},{"1":"Long-nosed armadillo","2":"17.4","3":"3.1","4":"0.3833333"},{"1":"Macaque","2":"10.1","3":"1.2","4":"0.7500000"},{"1":"Mole rat","2":"10.6","3":"2.4","4":"NA"},{"1":"Mongolian gerbil","2":"14.2","3":"1.9","4":"NA"},{"1":"Mongoose lemur","2":"9.5","3":"0.9","4":"NA"},{"1":"Mountain beaver","2":"14.4","3":"2.4","4":"NA"},{"1":"Musk shrew","2":"12.8","3":"2.0","4":"0.1833333"},{"1":"North American Opossum","2":"18.0","3":"4.9","4":"0.3333333"},{"1":"Northern fur seal","2":"8.7","3":"1.4","4":"0.3833333"},{"1":"Northern grasshopper mouse","2":"14.5","3":"NA","4":"NA"},{"1":"Owl monkey","2":"17.0","3":"1.8","4":"NA"},{"1":"Patas monkey","2":"10.9","3":"1.1","4":"NA"},{"1":"Phalanger","2":"13.7","3":"1.8","4":"NA"},{"1":"Pig","2":"9.1","3":"2.4","4":"0.5000000"},{"1":"Pilot whale","2":"2.7","3":"0.1","4":"NA"},{"1":"Potoroo","2":"11.1","3":"1.5","4":"NA"},{"1":"Potto","2":"11.0","3":"NA","4":"NA"},{"1":"Rabbit","2":"8.4","3":"0.9","4":"0.4166667"},{"1":"Red fox","2":"9.8","3":"2.4","4":"0.3500000"},{"1":"Rock hyrax","2":"5.4","3":"0.5","4":"NA"},{"1":"Roe deer","2":"3.0","3":"NA","4":"NA"},{"1":"Round-tailed muskrat","2":"14.6","3":"NA","4":"NA"},{"1":"Sheep","2":"3.8","3":"0.6","4":"NA"},{"1":"Short-nosed echidna","2":"8.6","3":"NA","4":"NA"},{"1":"Slow loris","2":"11.0","3":"NA","4":"NA"},{"1":"Squirrel monkey","2":"9.6","3":"1.4","4":"NA"},{"1":"Star-nosed mole","2":"10.3","3":"2.2","4":"NA"},{"1":"Tenrec","2":"15.6","3":"2.3","4":"NA"},{"1":"Thick-tailed opposum","2":"19.4","3":"6.6","4":"NA"},{"1":"Thirteen-lined ground squirrel","2":"13.8","3":"3.4","4":"0.2166667"},{"1":"Three-toed sloth","2":"14.4","3":"2.2","4":"0.7666667"},{"1":"Tiger","2":"15.8","3":"NA","4":"NA"},{"1":"Tree hyrax","2":"5.3","3":"0.5","4":"NA"},{"1":"Tree shrew","2":"8.9","3":"2.6","4":"0.2333333"},{"1":"Vesper mouse","2":"7.0","3":"NA","4":"NA"},{"1":"Vole","2":"12.8","3":"NA","4":"NA"},{"1":"Western american chipmunk","2":"14.9","3":"NA","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="turning-data-into-na" class="section level2" number="0.7">
<h2 number="0.7"><span class="header-section-number">0.7</span> <strong>Turning data into NA</strong></h2>
<p>The function <code>na_if()</code> turns particular values into <code>NA</code>. In most cases the command probably be <code>na_if("")</code> (i.e turn an empty string into NA), but in principle you can do anything.</p>
<p>The same code will turn any value that reads “omni” into NA</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name<span class="sc">:</span>order) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na_if</span>(<span class="st">&quot;omni&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["genus"],"name":[2],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[3],"type":["chr"],"align":["left"]},{"label":["order"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Cheetah","2":"Acinonyx","3":"carni","4":"Carnivora"},{"1":"Owl monkey","2":"Aotus","3":"NA","4":"Primates"},{"1":"Mountain beaver","2":"Aplodontia","3":"herbi","4":"Rodentia"},{"1":"Greater short-tailed shrew","2":"Blarina","3":"NA","4":"Soricomorpha"},{"1":"Cow","2":"Bos","3":"herbi","4":"Artiodactyla"},{"1":"Three-toed sloth","2":"Bradypus","3":"herbi","4":"Pilosa"},{"1":"Northern fur seal","2":"Callorhinus","3":"carni","4":"Carnivora"},{"1":"Vesper mouse","2":"Calomys","3":"NA","4":"Rodentia"},{"1":"Dog","2":"Canis","3":"carni","4":"Carnivora"},{"1":"Roe deer","2":"Capreolus","3":"herbi","4":"Artiodactyla"},{"1":"Goat","2":"Capri","3":"herbi","4":"Artiodactyla"},{"1":"Guinea pig","2":"Cavis","3":"herbi","4":"Rodentia"},{"1":"Grivet","2":"Cercopithecus","3":"NA","4":"Primates"},{"1":"Chinchilla","2":"Chinchilla","3":"herbi","4":"Rodentia"},{"1":"Star-nosed mole","2":"Condylura","3":"NA","4":"Soricomorpha"},{"1":"African giant pouched rat","2":"Cricetomys","3":"NA","4":"Rodentia"},{"1":"Lesser short-tailed shrew","2":"Cryptotis","3":"NA","4":"Soricomorpha"},{"1":"Long-nosed armadillo","2":"Dasypus","3":"carni","4":"Cingulata"},{"1":"Tree hyrax","2":"Dendrohyrax","3":"herbi","4":"Hyracoidea"},{"1":"North American Opossum","2":"Didelphis","3":"NA","4":"Didelphimorphia"},{"1":"Asian elephant","2":"Elephas","3":"herbi","4":"Proboscidea"},{"1":"Big brown bat","2":"Eptesicus","3":"insecti","4":"Chiroptera"},{"1":"Horse","2":"Equus","3":"herbi","4":"Perissodactyla"},{"1":"Donkey","2":"Equus","3":"herbi","4":"Perissodactyla"},{"1":"European hedgehog","2":"Erinaceus","3":"NA","4":"Erinaceomorpha"},{"1":"Patas monkey","2":"Erythrocebus","3":"NA","4":"Primates"},{"1":"Western american chipmunk","2":"Eutamias","3":"herbi","4":"Rodentia"},{"1":"Domestic cat","2":"Felis","3":"carni","4":"Carnivora"},{"1":"Galago","2":"Galago","3":"NA","4":"Primates"},{"1":"Giraffe","2":"Giraffa","3":"herbi","4":"Artiodactyla"},{"1":"Pilot whale","2":"Globicephalus","3":"carni","4":"Cetacea"},{"1":"Gray seal","2":"Haliochoerus","3":"carni","4":"Carnivora"},{"1":"Gray hyrax","2":"Heterohyrax","3":"herbi","4":"Hyracoidea"},{"1":"Human","2":"Homo","3":"NA","4":"Primates"},{"1":"Mongoose lemur","2":"Lemur","3":"herbi","4":"Primates"},{"1":"African elephant","2":"Loxodonta","3":"herbi","4":"Proboscidea"},{"1":"Thick-tailed opposum","2":"Lutreolina","3":"carni","4":"Didelphimorphia"},{"1":"Macaque","2":"Macaca","3":"NA","4":"Primates"},{"1":"Mongolian gerbil","2":"Meriones","3":"herbi","4":"Rodentia"},{"1":"Golden hamster","2":"Mesocricetus","3":"herbi","4":"Rodentia"},{"1":"Vole","2":"Microtus","3":"herbi","4":"Rodentia"},{"1":"House mouse","2":"Mus","3":"herbi","4":"Rodentia"},{"1":"Little brown bat","2":"Myotis","3":"insecti","4":"Chiroptera"},{"1":"Round-tailed muskrat","2":"Neofiber","3":"herbi","4":"Rodentia"},{"1":"Slow loris","2":"Nyctibeus","3":"carni","4":"Primates"},{"1":"Degu","2":"Octodon","3":"herbi","4":"Rodentia"},{"1":"Northern grasshopper mouse","2":"Onychomys","3":"carni","4":"Rodentia"},{"1":"Rabbit","2":"Oryctolagus","3":"herbi","4":"Lagomorpha"},{"1":"Sheep","2":"Ovis","3":"herbi","4":"Artiodactyla"},{"1":"Chimpanzee","2":"Pan","3":"NA","4":"Primates"},{"1":"Tiger","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Jaguar","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Lion","2":"Panthera","3":"carni","4":"Carnivora"},{"1":"Baboon","2":"Papio","3":"NA","4":"Primates"},{"1":"Desert hedgehog","2":"Paraechinus","3":"NA","4":"Erinaceomorpha"},{"1":"Potto","2":"Perodicticus","3":"NA","4":"Primates"},{"1":"Deer mouse","2":"Peromyscus","3":"NA","4":"Rodentia"},{"1":"Phalanger","2":"Phalanger","3":"NA","4":"Diprotodontia"},{"1":"Caspian seal","2":"Phoca","3":"carni","4":"Carnivora"},{"1":"Common porpoise","2":"Phocoena","3":"carni","4":"Cetacea"},{"1":"Potoroo","2":"Potorous","3":"herbi","4":"Diprotodontia"},{"1":"Giant armadillo","2":"Priodontes","3":"insecti","4":"Cingulata"},{"1":"Rock hyrax","2":"Procavia","3":"NA","4":"Hyracoidea"},{"1":"Laboratory rat","2":"Rattus","3":"herbi","4":"Rodentia"},{"1":"African striped mouse","2":"Rhabdomys","3":"NA","4":"Rodentia"},{"1":"Squirrel monkey","2":"Saimiri","3":"NA","4":"Primates"},{"1":"Eastern american mole","2":"Scalopus","3":"insecti","4":"Soricomorpha"},{"1":"Cotton rat","2":"Sigmodon","3":"herbi","4":"Rodentia"},{"1":"Mole rat","2":"Spalax","3":"NA","4":"Rodentia"},{"1":"Arctic ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Thirteen-lined ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Golden-mantled ground squirrel","2":"Spermophilus","3":"herbi","4":"Rodentia"},{"1":"Musk shrew","2":"Suncus","3":"NA","4":"Soricomorpha"},{"1":"Pig","2":"Sus","3":"NA","4":"Artiodactyla"},{"1":"Short-nosed echidna","2":"Tachyglossus","3":"insecti","4":"Monotremata"},{"1":"Eastern american chipmunk","2":"Tamias","3":"herbi","4":"Rodentia"},{"1":"Brazilian tapir","2":"Tapirus","3":"herbi","4":"Perissodactyla"},{"1":"Tenrec","2":"Tenrec","3":"NA","4":"Afrosoricida"},{"1":"Tree shrew","2":"Tupaia","3":"NA","4":"Scandentia"},{"1":"Bottle-nosed dolphin","2":"Tursiops","3":"carni","4":"Cetacea"},{"1":"Genet","2":"Genetta","3":"carni","4":"Carnivora"},{"1":"Arctic fox","2":"Vulpes","3":"carni","4":"Carnivora"},{"1":"Red fox","2":"Vulpes","3":"carni","4":"Carnivora"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
